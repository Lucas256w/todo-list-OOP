(()=>{"use strict";const e=JSON.parse(localStorage.getItem("projects")),t=JSON.parse(localStorage.getItem("tasks")),a=e||[],n=t||[],c=class{static loadAllTask(){document.querySelector("#tab-title").textContent="All Tasks";const e=document.querySelector("#content");e.innerHTML="";const t=document.createElement("div");t.id="task-list",e.appendChild(t),i.loadAllTasks(t)}};class l{constructor(e,t,a,n,c,l){this.title=e,this.description=t,this.dueDate=a,this.priority=n,this.project=c,this.checked=l}}class o{static generateForm(e){document.querySelector("#content").innerHTML='\n        <div id="add-tasks-inputs-container" style="display: flex;">\n            <label for="task-title">Title: </label>\n            <input type="text" id="task-title" maxlength="40">\n            <label for="task-description">Description: </label>\n            <textarea id="task-description" maxlength="200"></textarea>\n            <label for="task-date">Date: </label>\n            <input type="date" id="task-date" max="9999-12-31">\n            <div id="priority-title">Priority: </div>\n            <div id="priority-button-container">\n                <button id="low-priority-btn">Low</button>\n                <button id="med-priority-btn">Med</button>\n                <button id="high-priority-btn">High</button>\n             </div>\n            <div id="add-cancel-task-container">\n            <button id="add-task-confirm-button">Add</button>\n            <button id="cancel-task-confirm-button">Cancel</button>\n            </div>\n        </div>\n        ';const t=document.querySelector("#task-title"),a=document.querySelector("#task-description"),c=document.querySelector("#task-date"),o=document.querySelector("#low-priority-btn"),i=document.querySelector("#med-priority-btn"),s=document.querySelector("#high-priority-btn"),d=document.querySelector("#add-task-confirm-button"),u=document.querySelector("#cancel-task-confirm-button");let m="";o.addEventListener("click",(()=>{o.className="selectedPrio",i.className="",s.className="",m="Low"})),i.addEventListener("click",(()=>{o.className="",i.className="selectedPrio",s.className="",m="Med"})),s.addEventListener("click",(()=>{o.className="",i.className="",s.className="selectedPrio",m="High"})),u.addEventListener("click",(()=>{r.viewProjectPage(e)})),d.addEventListener("click",(()=>{if(""!=t.value.trim()&&""!=a.value.trim()&&""!=c.value&&""!=m){const o=new l(t.value,a.value,c.value,m,e,!1);n.push(o),localStorage.setItem("tasks",JSON.stringify(n)),console.log(n),r.viewProjectPage(e)}else console.log(t.value.trim(),a.value.trim(),c.value,m),alert("Please fill all information")}))}}class i{static loadTaskForProject(e,t){n.forEach((a=>{a.project==e&&i.loadTaskGeneral(a,t,!1)}))}static loadAllTasks(e){n.forEach((t=>{i.loadTaskGeneral(t,e,!0)}))}static loadTaskGeneral(e,t,a){const l=document.createElement("div");l.className="task-card";const o=document.createElement("div");o.className="card-check-box",o.addEventListener("click",(()=>{0==e.checked?(e.checked=!0,o.classList.toggle("checked"),l.classList.toggle("checked"),localStorage.setItem("tasks",JSON.stringify(n))):(e.checked=!1,o.classList.toggle("checked"),l.classList.toggle("checked"),localStorage.setItem("tasks",JSON.stringify(n)))})),1==e.checked&&(o.classList.add("checked"),l.classList.add("checked"));const i=document.createElement("div");i.className="card-title",i.textContent=e.title;const d=document.createElement("button");d.className="card-details-button",d.textContent="details",d.addEventListener("click",(()=>{s.editTask(e.project,e,a)}));const u=document.createElement("div");u.className="card-date",u.textContent=e.dueDate;const m=document.createElement("div");m.className="card-prio",m.textContent=e.priority;const p=document.createElement("div");p.className="card-delete",p.textContent="X",p.addEventListener("click",(()=>{let t=e.project;const l=n.indexOf(e);n.splice(l,1),localStorage.setItem("tasks",JSON.stringify(n)),a?c.loadAllTask():r.viewProjectPage(t)})),l.appendChild(o),l.appendChild(i),l.appendChild(d),l.appendChild(u),l.appendChild(m),l.appendChild(p),t.appendChild(l)}}class s{static editTask(e,t,a){document.querySelector("#content").innerHTML=`\n        <div id="add-tasks-inputs-container" style="display: flex;">\n            <label for="task-title">Title: </label>\n            <input type="text" id="task-title" value=${t.title} maxlength="40">\n            <label for="task-description">Description: </label>\n            <textarea id="task-description" maxlength="200">${t.description}</textarea>\n            <label for="task-date">Date: </label>\n            <input type="date" id="task-date" value=${t.dueDate} max="9999-12-31">\n            <div id="priority-title">Priority: </div>\n            <div id="priority-button-container">\n                <button id="low-priority-btn">Low</button>\n                <button id="med-priority-btn">Med</button>\n                <button id="high-priority-btn">High</button>\n             </div>\n            <div id="add-cancel-task-container">\n            <button id="add-task-confirm-button">Add</button>\n            <button id="cancel-task-confirm-button">Cancel</button>\n            </div>\n        </div>\n        `;const l=document.querySelector("#task-title"),o=document.querySelector("#task-description"),i=document.querySelector("#task-date"),s=document.querySelector("#low-priority-btn"),d=document.querySelector("#med-priority-btn"),u=document.querySelector("#high-priority-btn"),m=document.querySelector("#add-task-confirm-button"),p=document.querySelector("#cancel-task-confirm-button");let k=t.priority;"Low"==k?s.className="selectedPrio":"Med"==k?d.className="selectedPrio":"High"==k&&(u.className="selectedPrio"),s.addEventListener("click",(()=>{s.className="selectedPrio",d.className="",u.className="",k="Low"})),d.addEventListener("click",(()=>{s.className="",d.className="selectedPrio",u.className="",k="Med"})),u.addEventListener("click",(()=>{s.className="",d.className="",u.className="selectedPrio",k="High"})),p.addEventListener("click",(()=>{a?c.loadAllTask():r.viewProjectPage(e)})),m.addEventListener("click",(()=>{""!=l.value.trim()&&""!=o.value.trim()&&""!=i.value&&""!=k?(t.title=l.value,t.description=o.value,t.dueDate=i.value,t.priority=k,console.log(n),localStorage.setItem("tasks",JSON.stringify(n)),a?c.loadAllTask():r.viewProjectPage(e)):(console.log(l.value.trim(),o.value.trim(),i.value,k),alert("Please fill all information"))}))}}class d{static addProjectUi(){const e=document.querySelector("#add-project-input-container"),t=document.querySelector("#add-projects-button");d.addProjectBtn(t,e),d.confirmBtn(t,e),d.cancelBtn(t,e)}static addProjectBtn(e,t){e.addEventListener("click",(()=>{e.style.display="none",t.style.display="grid",console.log(a)}))}static confirmBtn(e,t){document.querySelector("#add-button").addEventListener("click",(()=>{const n=document.querySelector("#add-project-input");a.includes(n.value)?alert(`${n.value} already exist`):""==n.value.trim()?alert("enter a value please"):(a.push(n.value),localStorage.setItem("projects",JSON.stringify(a)),d.generateProjects(),n.value="",t.style.display="none",e.style.display="block")}))}static cancelBtn(e,t){document.querySelector("#cancel-button").addEventListener("click",(()=>{document.querySelector("#add-project-input").value="",t.style.display="none",e.style.display="block"}))}static generateProjects(){const e=document.querySelector("#project-list");e.innerHTML="",a.forEach((t=>{const a=document.createElement("div");a.className="project-container";const n=document.createElement("button");n.className="project",n.textContent=t;const l=document.createElement("button");l.className="delete-project-button",l.textContent="X",l.addEventListener("click",(()=>{d.deleteProject(t),c.loadAllTask()})),n.addEventListener("click",(()=>{d.viewProjectPage(t)})),a.appendChild(n),a.appendChild(l),e.appendChild(a)}))}static deleteProject(e){const t=a.indexOf(e);a.splice(t,1),n.forEach((t=>{if(t.project==e){const e=n.indexOf(t);n.splice(e,1)}})),localStorage.setItem("tasks",JSON.stringify(n)),localStorage.setItem("projects",JSON.stringify(a)),d.generateProjects()}static viewProjectPage(e){document.querySelector("#tab-title").textContent=e;const t=document.querySelector("#content");t.innerHTML="";const a=document.createElement("button");a.id="add-task-button",a.textContent="+ Add Task",a.addEventListener("click",(()=>{o.generateForm(e)}));const n=document.createElement("div");n.id="task-list",t.appendChild(a),t.appendChild(n),i.loadTaskForProject(e,n)}}const r=d;document.addEventListener("DOMContentLoaded",class{static activateInterface(){r.addProjectUi(),document.querySelector("#all-tasks-tab").addEventListener("click",(()=>{c.loadAllTask()})),c.loadAllTask(),r.generateProjects()}}.activateInterface())})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL21vZHVsZXMvU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL21vZHVsZXMvQWxsVGFzay5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL21vZHVsZXMvVGFzay5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL21vZHVsZXMvUHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC1vb3AvLi9zcmMvbW9kdWxlcy9VSS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzdG9yZWRQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2plY3RzJykpO1xuY29uc3Qgc3RvcmVkVGFza3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0YXNrcycpKTtcblxuY29uc3QgcHJvamVjdHMgPSAgc3RvcmVkUHJvamVjdHMgfHwgW11cbmNvbnN0IHRhc2tzID0gc3RvcmVkVGFza3MgfHwgW11cblxuXG5leHBvcnQge3Byb2plY3RzLCB0YXNrcywgc3RvcmVkUHJvamVjdHMsIHN0b3JlZFRhc2tzfSIsImltcG9ydCB7IExvYWRUYXNrIH0gZnJvbSBcIi4vVGFza1wiXG5cbmNsYXNzIEFsbFRhc2sge1xuICAgIHN0YXRpYyBsb2FkQWxsVGFzaygpIHtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFiLXRpdGxlJylcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSAnQWxsIFRhc2tzJztcbiAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50JylcbiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnJ1xuICAgICAgICBjb25zdCB0YXNrTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHRhc2tMaXN0LmlkID0gJ3Rhc2stbGlzdCdcblxuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKHRhc2tMaXN0KVxuXG4gICAgICAgIExvYWRUYXNrLmxvYWRBbGxUYXNrcyh0YXNrTGlzdClcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFsbFRhc2siLCJpbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9Qcm9qZWN0XCJcbmltcG9ydCB7IHRhc2tzLCBzdG9yZWRQcm9qZWN0cywgc3RvcmVkVGFza3MsIHByb2plY3RzIH0gZnJvbSBcIi4vU3RvcmFnZVwiXG5pbXBvcnQgQWxsVGFzayBmcm9tIFwiLi9BbGxUYXNrXCJcblxuY2xhc3MgVGFzayB7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgcHJvamVjdCwgY2hlY2tlZCkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGVcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uXG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGVcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3RcbiAgICAgICAgdGhpcy5jaGVja2VkID0gY2hlY2tlZFxuICAgIH1cbn1cblxuY2xhc3MgTWFrZU5ld1Rhc2sge1xuICAgIHN0YXRpYyBnZW5lcmF0ZUZvcm0ocHJvamVjdCkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRlbnQnKVxuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBpZD1cImFkZC10YXNrcy1pbnB1dHMtY29udGFpbmVyXCIgc3R5bGU9XCJkaXNwbGF5OiBmbGV4O1wiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInRhc2stdGl0bGVcIj5UaXRsZTogPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwidGFzay10aXRsZVwiIG1heGxlbmd0aD1cIjQwXCI+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFzay1kZXNjcmlwdGlvblwiPkRlc2NyaXB0aW9uOiA8L2xhYmVsPlxuICAgICAgICAgICAgPHRleHRhcmVhIGlkPVwidGFzay1kZXNjcmlwdGlvblwiIG1heGxlbmd0aD1cIjIwMFwiPjwvdGV4dGFyZWE+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFzay1kYXRlXCI+RGF0ZTogPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIGlkPVwidGFzay1kYXRlXCIgbWF4PVwiOTk5OS0xMi0zMVwiPlxuICAgICAgICAgICAgPGRpdiBpZD1cInByaW9yaXR5LXRpdGxlXCI+UHJpb3JpdHk6IDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBpZD1cInByaW9yaXR5LWJ1dHRvbi1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwibG93LXByaW9yaXR5LWJ0blwiPkxvdzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJtZWQtcHJpb3JpdHktYnRuXCI+TWVkPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImhpZ2gtcHJpb3JpdHktYnRuXCI+SGlnaDwvYnV0dG9uPlxuICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBpZD1cImFkZC1jYW5jZWwtdGFzay1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJhZGQtdGFzay1jb25maXJtLWJ1dHRvblwiPkFkZDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImNhbmNlbC10YXNrLWNvbmZpcm0tYnV0dG9uXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICAgICAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2stdGl0bGUnKTtcbiAgICAgICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2stZGVzY3JpcHRpb24nKTtcbiAgICAgICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay1kYXRlJylcbiAgICAgICAgY29uc3QgbG93UHJpb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb3ctcHJpb3JpdHktYnRuJyk7XG4gICAgICAgIGNvbnN0IG1lZFByaW9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVkLXByaW9yaXR5LWJ0bicpO1xuICAgICAgICBjb25zdCBoaWdoUHJpb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoaWdoLXByaW9yaXR5LWJ0bicpO1xuXG4gICAgICAgIGNvbnN0IGFkZFRhc2tidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLXRhc2stY29uZmlybS1idXR0b24nKTtcbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhbmNlbC10YXNrLWNvbmZpcm0tYnV0dG9uJyk7XG5cbiAgICAgICAgbGV0IHNlbGVjdGVkUHJpbyA9ICcnXG5cbiAgICAgICAgbG93UHJpb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBsb3dQcmlvQnRuLmNsYXNzTmFtZSA9ICdzZWxlY3RlZFByaW8nXG4gICAgICAgICAgICBtZWRQcmlvQnRuLmNsYXNzTmFtZSA9ICcnXG4gICAgICAgICAgICBoaWdoUHJpb0J0bi5jbGFzc05hbWUgPSAnJ1xuXG4gICAgICAgICAgICBzZWxlY3RlZFByaW8gPSAnTG93J1xuICAgICAgICB9KVxuICAgICAgICBtZWRQcmlvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGxvd1ByaW9CdG4uY2xhc3NOYW1lID0gJydcbiAgICAgICAgICAgIG1lZFByaW9CdG4uY2xhc3NOYW1lID0gJ3NlbGVjdGVkUHJpbydcbiAgICAgICAgICAgIGhpZ2hQcmlvQnRuLmNsYXNzTmFtZSA9ICcnXG5cbiAgICAgICAgICAgIHNlbGVjdGVkUHJpbyA9ICdNZWQnXG4gICAgICAgIH0pXG4gICAgICAgIGhpZ2hQcmlvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGxvd1ByaW9CdG4uY2xhc3NOYW1lID0gJydcbiAgICAgICAgICAgIG1lZFByaW9CdG4uY2xhc3NOYW1lID0gJydcbiAgICAgICAgICAgIGhpZ2hQcmlvQnRuLmNsYXNzTmFtZSA9ICdzZWxlY3RlZFByaW8nXG5cbiAgICAgICAgICAgIHNlbGVjdGVkUHJpbyA9ICdIaWdoJ1xuICAgICAgICB9KVxuXG4gICAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBQcm9qZWN0LnZpZXdQcm9qZWN0UGFnZShwcm9qZWN0KVxuICAgICAgICB9KVxuXG4gICAgICAgIGFkZFRhc2tidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgaWYgKHRhc2tUaXRsZS52YWx1ZS50cmltKCkgIT0gJycgJiYgdGFza0Rlc2NyaXB0aW9uLnZhbHVlLnRyaW0oKSAhPSAnJyAmJiB0YXNrRGF0ZS52YWx1ZSAhPSAnJyAmJiBzZWxlY3RlZFByaW8gIT0gJycpe1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2sgPSBuZXcgVGFzayh0YXNrVGl0bGUudmFsdWUsIHRhc2tEZXNjcmlwdGlvbi52YWx1ZSwgdGFza0RhdGUudmFsdWUsIHNlbGVjdGVkUHJpbywgcHJvamVjdCwgZmFsc2UpXG4gICAgICAgICAgICAgICAgdGFza3MucHVzaCh0YXNrKVxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRhc2tzKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFza3MpXG4gICAgICAgICAgICAgICAgUHJvamVjdC52aWV3UHJvamVjdFBhZ2UocHJvamVjdClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFza1RpdGxlLnZhbHVlLnRyaW0oKSwgdGFza0Rlc2NyaXB0aW9uLnZhbHVlLnRyaW0oKSwgdGFza0RhdGUudmFsdWUsIHNlbGVjdGVkUHJpbylcbiAgICAgICAgICAgICAgICBhbGVydCgnUGxlYXNlIGZpbGwgYWxsIGluZm9ybWF0aW9uJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBcbiAgICAgIFxuICAgIH1cbn1cblxuY2xhc3MgTG9hZFRhc2sge1xuICAgIHN0YXRpYyBsb2FkVGFza0ZvclByb2plY3QocHJvamVjdCwgdGFza0xpc3QpIHtcbiAgICAgICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4gIHtcbiAgICAgICAgICAgIGlmICh0YXNrLnByb2plY3QgPT0gcHJvamVjdCl7XG4gICAgICAgICAgICAgICAgTG9hZFRhc2subG9hZFRhc2tHZW5lcmFsKHRhc2ssIHRhc2tMaXN0LCBmYWxzZSlcblxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHN0YXRpYyBsb2FkQWxsVGFza3ModGFza0xpc3QpIHtcbiAgICAgICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4gIHtcbiAgICAgICAgICAgICAgICBMb2FkVGFzay5sb2FkVGFza0dlbmVyYWwodGFzaywgdGFza0xpc3QsIHRydWUpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc3RhdGljIGxvYWRUYXNrR2VuZXJhbCh0YXNrLCB0YXNrTGlzdCwgdG9kYXkpIHtcbiAgICAgICAgY29uc3QgdGFza0NhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgIHRhc2tDYXJkLmNsYXNzTmFtZSA9ICd0YXNrLWNhcmQnXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgIGNoZWNrQm94LmNsYXNzTmFtZSA9ICdjYXJkLWNoZWNrLWJveCdcbiAgICAgICAgICAgICAgICBjaGVja0JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrLmNoZWNrZWQgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suY2hlY2tlZCA9IHRydWUgXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0JveC5jbGFzc0xpc3QudG9nZ2xlKCdjaGVja2VkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXJkLmNsYXNzTGlzdC50b2dnbGUoJ2NoZWNrZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suY2hlY2tlZCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0JveC5jbGFzc0xpc3QudG9nZ2xlKCdjaGVja2VkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXJkLmNsYXNzTGlzdC50b2dnbGUoJ2NoZWNrZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICBpZiAodGFzay5jaGVja2VkID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3guY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpXG4gICAgICAgICAgICAgICAgICAgIHRhc2tDYXJkLmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgICAgICB0aXRsZS5jbGFzc05hbWUgPSAnY2FyZC10aXRsZSdcbiAgICAgICAgICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRhc2sudGl0bGU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAgICAgICAgICAgICBkZXRhaWxzLmNsYXNzTmFtZSA9ICdjYXJkLWRldGFpbHMtYnV0dG9uJ1xuICAgICAgICAgICAgICAgIGRldGFpbHMudGV4dENvbnRlbnQgPSAnZGV0YWlscydcbiAgICAgICAgICAgICAgICBkZXRhaWxzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIEVkaXRUYXNrLmVkaXRUYXNrKHRhc2sucHJvamVjdCwgdGFzaywgdG9kYXkpXG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgIGRhdGUuY2xhc3NOYW1lID0gJ2NhcmQtZGF0ZSdcbiAgICAgICAgICAgICAgICBkYXRlLnRleHRDb250ZW50ID0gdGFzay5kdWVEYXRlXG5cbiAgICAgICAgICAgICAgICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICAgICAgcHJpb3JpdHkuY2xhc3NOYW1lID0gJ2NhcmQtcHJpbydcbiAgICAgICAgICAgICAgICBwcmlvcml0eS50ZXh0Q29udGVudCA9IHRhc2sucHJpb3JpdHlcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgIGRlbGV0ZUNhcmQuY2xhc3NOYW1lID0gJ2NhcmQtZGVsZXRlJ1xuICAgICAgICAgICAgICAgIGRlbGV0ZUNhcmQudGV4dENvbnRlbnQgPSAnWCdcbiAgICAgICAgICAgICAgICBkZWxldGVDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50UHJvamVjdCA9IHRhc2sucHJvamVjdFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRhc2tzLmluZGV4T2YodGFzaylcbiAgICAgICAgICAgICAgICAgICAgdGFza3Muc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza3MnLCBKU09OLnN0cmluZ2lmeSh0YXNrcykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9kYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbFRhc2subG9hZEFsbFRhc2soKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgUHJvamVjdC52aWV3UHJvamVjdFBhZ2UoY3VycmVudFByb2plY3QpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgdGFza0NhcmQuYXBwZW5kQ2hpbGQoY2hlY2tCb3gpXG4gICAgICAgICAgICAgICAgdGFza0NhcmQuYXBwZW5kQ2hpbGQodGl0bGUpXG4gICAgICAgICAgICAgICAgdGFza0NhcmQuYXBwZW5kQ2hpbGQoZGV0YWlscylcbiAgICAgICAgICAgICAgICB0YXNrQ2FyZC5hcHBlbmRDaGlsZChkYXRlKVxuICAgICAgICAgICAgICAgIHRhc2tDYXJkLmFwcGVuZENoaWxkKHByaW9yaXR5KVxuICAgICAgICAgICAgICAgIHRhc2tDYXJkLmFwcGVuZENoaWxkKGRlbGV0ZUNhcmQpXG5cblxuXG4gICAgICAgICAgICAgICAgdGFza0xpc3QuYXBwZW5kQ2hpbGQodGFza0NhcmQpXG4gICAgfVxufVxuXG5jbGFzcyBFZGl0VGFzayB7XG5cbiAgICBzdGF0aWMgZWRpdFRhc2socHJvamVjdCwgdGFzaywgdG9kYXkpIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50JylcbiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgaWQ9XCJhZGQtdGFza3MtaW5wdXRzLWNvbnRhaW5lclwiIHN0eWxlPVwiZGlzcGxheTogZmxleDtcIj5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ0YXNrLXRpdGxlXCI+VGl0bGU6IDwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInRhc2stdGl0bGVcIiB2YWx1ZT0ke3Rhc2sudGl0bGV9IG1heGxlbmd0aD1cIjQwXCI+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFzay1kZXNjcmlwdGlvblwiPkRlc2NyaXB0aW9uOiA8L2xhYmVsPlxuICAgICAgICAgICAgPHRleHRhcmVhIGlkPVwidGFzay1kZXNjcmlwdGlvblwiIG1heGxlbmd0aD1cIjIwMFwiPiR7dGFzay5kZXNjcmlwdGlvbn08L3RleHRhcmVhPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInRhc2stZGF0ZVwiPkRhdGU6IDwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cImRhdGVcIiBpZD1cInRhc2stZGF0ZVwiIHZhbHVlPSR7dGFzay5kdWVEYXRlfSBtYXg9XCI5OTk5LTEyLTMxXCI+XG4gICAgICAgICAgICA8ZGl2IGlkPVwicHJpb3JpdHktdGl0bGVcIj5Qcmlvcml0eTogPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGlkPVwicHJpb3JpdHktYnV0dG9uLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJsb3ctcHJpb3JpdHktYnRuXCI+TG93PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cIm1lZC1wcmlvcml0eS1idG5cIj5NZWQ8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiaGlnaC1wcmlvcml0eS1idG5cIj5IaWdoPC9idXR0b24+XG4gICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGlkPVwiYWRkLWNhbmNlbC10YXNrLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImFkZC10YXNrLWNvbmZpcm0tYnV0dG9uXCI+QWRkPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwiY2FuY2VsLXRhc2stY29uZmlybS1idXR0b25cIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay10aXRsZScpO1xuICAgICAgICBjb25zdCB0YXNrRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay1kZXNjcmlwdGlvbicpO1xuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXNrLWRhdGUnKVxuICAgICAgICBjb25zdCBsb3dQcmlvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvdy1wcmlvcml0eS1idG4nKTtcbiAgICAgICAgY29uc3QgbWVkUHJpb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZWQtcHJpb3JpdHktYnRuJyk7XG4gICAgICAgIGNvbnN0IGhpZ2hQcmlvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hpZ2gtcHJpb3JpdHktYnRuJyk7XG5cbiAgICAgICAgY29uc3QgYWRkVGFza2J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtdGFzay1jb25maXJtLWJ1dHRvbicpO1xuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FuY2VsLXRhc2stY29uZmlybS1idXR0b24nKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBzZWxlY3RlZFByaW8gPSB0YXNrLnByaW9yaXR5XG4gICAgICAgIGlmKHNlbGVjdGVkUHJpbyA9PSAnTG93Jykge1xuICAgICAgICAgICAgbG93UHJpb0J0bi5jbGFzc05hbWUgPSAnc2VsZWN0ZWRQcmlvJ1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkUHJpbyA9PSAnTWVkJykge1xuICAgICAgICAgICAgbWVkUHJpb0J0bi5jbGFzc05hbWUgPSAnc2VsZWN0ZWRQcmlvJ1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkUHJpbyA9PSAnSGlnaCcpIHtcbiAgICAgICAgICAgIGhpZ2hQcmlvQnRuLmNsYXNzTmFtZSA9ICdzZWxlY3RlZFByaW8nXG4gICAgICAgIH1cblxuICAgICAgICBsb3dQcmlvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGxvd1ByaW9CdG4uY2xhc3NOYW1lID0gJ3NlbGVjdGVkUHJpbydcbiAgICAgICAgICAgIG1lZFByaW9CdG4uY2xhc3NOYW1lID0gJydcbiAgICAgICAgICAgIGhpZ2hQcmlvQnRuLmNsYXNzTmFtZSA9ICcnXG5cbiAgICAgICAgICAgIHNlbGVjdGVkUHJpbyA9ICdMb3cnXG4gICAgICAgIH0pXG4gICAgICAgIG1lZFByaW9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgbG93UHJpb0J0bi5jbGFzc05hbWUgPSAnJ1xuICAgICAgICAgICAgbWVkUHJpb0J0bi5jbGFzc05hbWUgPSAnc2VsZWN0ZWRQcmlvJ1xuICAgICAgICAgICAgaGlnaFByaW9CdG4uY2xhc3NOYW1lID0gJydcblxuICAgICAgICAgICAgc2VsZWN0ZWRQcmlvID0gJ01lZCdcbiAgICAgICAgfSlcbiAgICAgICAgaGlnaFByaW9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgbG93UHJpb0J0bi5jbGFzc05hbWUgPSAnJ1xuICAgICAgICAgICAgbWVkUHJpb0J0bi5jbGFzc05hbWUgPSAnJ1xuICAgICAgICAgICAgaGlnaFByaW9CdG4uY2xhc3NOYW1lID0gJ3NlbGVjdGVkUHJpbydcblxuICAgICAgICAgICAgc2VsZWN0ZWRQcmlvID0gJ0hpZ2gnXG4gICAgICAgIH0pXG5cbiAgICAgICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGlmICh0b2RheSl7XG4gICAgICAgICAgICAgICAgQWxsVGFzay5sb2FkQWxsVGFzaygpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFByb2plY3Qudmlld1Byb2plY3RQYWdlKHByb2plY3QpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgYWRkVGFza2J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBpZiAodGFza1RpdGxlLnZhbHVlLnRyaW0oKSAhPSAnJyAmJiB0YXNrRGVzY3JpcHRpb24udmFsdWUudHJpbSgpICE9ICcnICYmIHRhc2tEYXRlLnZhbHVlICE9ICcnICYmIHNlbGVjdGVkUHJpbyAhPSAnJyl7XG4gICAgICAgICAgICAgICAgdGFzay50aXRsZSA9IHRhc2tUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgICAgICB0YXNrLmRlc2NyaXB0aW9uID0gdGFza0Rlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgIHRhc2suZHVlRGF0ZSA9IHRhc2tEYXRlLnZhbHVlO1xuICAgICAgICAgICAgICAgIHRhc2sucHJpb3JpdHkgPSBzZWxlY3RlZFByaW87XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFza3MpXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcbiAgICAgICAgICAgICAgICBpZiAodG9kYXkpe1xuICAgICAgICAgICAgICAgICAgICBBbGxUYXNrLmxvYWRBbGxUYXNrKClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBQcm9qZWN0LnZpZXdQcm9qZWN0UGFnZShwcm9qZWN0KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFza1RpdGxlLnZhbHVlLnRyaW0oKSwgdGFza0Rlc2NyaXB0aW9uLnZhbHVlLnRyaW0oKSwgdGFza0RhdGUudmFsdWUsIHNlbGVjdGVkUHJpbylcbiAgICAgICAgICAgICAgICBhbGVydCgnUGxlYXNlIGZpbGwgYWxsIGluZm9ybWF0aW9uJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuXG4gICAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IFRhc2tcbmV4cG9ydCB7TWFrZU5ld1Rhc2ssIExvYWRUYXNrfSIsImltcG9ydCBVc2VySW50ZXJmYWNlIGZyb20gXCIuL1VJXCI7XG5pbXBvcnQgeyBwcm9qZWN0cywgc3RvcmVkUHJvamVjdHMsIHN0b3JlZFRhc2tzLCB0YXNrcyB9IGZyb20gXCIuL1N0b3JhZ2VcIjtcbmltcG9ydCB7IE1ha2VOZXdUYXNrLCBMb2FkVGFzayB9IGZyb20gXCIuL1Rhc2tcIjtcbmltcG9ydCBBbGxUYXNrIGZyb20gXCIuL0FsbFRhc2tcIjtcblxuY2xhc3MgUHJvamVjdCB7XG4gICAgc3RhdGljIGFkZFByb2plY3RVaSgpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1wcm9qZWN0LWlucHV0LWNvbnRhaW5lcicpO1xuICAgICAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1wcm9qZWN0cy1idXR0b24nKVxuICAgICAgICBQcm9qZWN0LmFkZFByb2plY3RCdG4oYWRkUHJvamVjdEJ0biwgcHJvamVjdElucHV0KVxuICAgICAgICBQcm9qZWN0LmNvbmZpcm1CdG4oYWRkUHJvamVjdEJ0biwgcHJvamVjdElucHV0KVxuICAgICAgICBQcm9qZWN0LmNhbmNlbEJ0bihhZGRQcm9qZWN0QnRuLCBwcm9qZWN0SW5wdXQpXG4gICAgfVxuICAgIHN0YXRpYyBhZGRQcm9qZWN0QnRuKGFkZFByb2plY3RCdG4sIHByb2plY3RJbnB1dCkge1xuICAgICAgICBhZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB7XG4gICAgICAgICAgICBhZGRQcm9qZWN0QnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgICAgIHByb2plY3RJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ2dyaWQnXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0cylcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzdGF0aWMgY29uZmlybUJ0bihhZGRQcm9qZWN0QnRuLCBwcm9qZWN0SW5wdXQpIHtcbiAgICAgICAgY29uc3QgYWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1idXR0b24nKVxuICAgICAgICBhZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1wcm9qZWN0LWlucHV0JylcbiAgICAgICAgICAgIGlmIChwcm9qZWN0cy5pbmNsdWRlcyhpbnB1dC52YWx1ZSkpe1xuICAgICAgICAgICAgICAgIGFsZXJ0KGAke2lucHV0LnZhbHVlfSBhbHJlYWR5IGV4aXN0YClcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQudmFsdWUudHJpbSgpID09ICcnKXtcbiAgICAgICAgICAgICAgICBhbGVydCgnZW50ZXIgYSB2YWx1ZSBwbGVhc2UnKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0cy5wdXNoKGlucHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xuICAgICAgICAgICAgICAgIFByb2plY3QuZ2VuZXJhdGVQcm9qZWN0cygpXG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPScnXG4gICAgICAgICAgICAgICAgcHJvamVjdElucHV0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgICAgICAgICBhZGRQcm9qZWN0QnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzdGF0aWMgY2FuY2VsQnRuKGFkZFByb2plY3RCdG4sIHByb2plY3RJbnB1dCkge1xuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FuY2VsLWJ1dHRvbicpXG4gICAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtcHJvamVjdC1pbnB1dCcpXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9JydcbiAgICAgICAgICAgIHByb2plY3RJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICBhZGRQcm9qZWN0QnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc3RhdGljIGdlbmVyYXRlUHJvamVjdHMoKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QtbGlzdCcpXG4gICAgICAgIHByb2plY3RMaXN0LmlubmVySFRNTCA9ICcnXG4gICAgICAgIHByb2plY3RzLmZvckVhY2goKHByb2plY3QpPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICBwcm9qZWN0Q29udGFpbmVyLmNsYXNzTmFtZSA9ICdwcm9qZWN0LWNvbnRhaW5lcidcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RTaW5nbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICAgICAgcHJvamVjdFNpbmdsZS5jbGFzc05hbWUgPSAncHJvamVjdCdcbiAgICAgICAgICAgIHByb2plY3RTaW5nbGUudGV4dENvbnRlbnQgPSBwcm9qZWN0XG4gICAgICAgICAgICBjb25zdCBkZWxldGVQcm9qZWN0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAgICAgICAgIGRlbGV0ZVByb2plY3RCdG4uY2xhc3NOYW1lID0gJ2RlbGV0ZS1wcm9qZWN0LWJ1dHRvbidcbiAgICAgICAgICAgIGRlbGV0ZVByb2plY3RCdG4udGV4dENvbnRlbnQgPSAnWCdcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVsZXRlUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICAgICAgUHJvamVjdC5kZWxldGVQcm9qZWN0KHByb2plY3QpXG4gICAgICAgICAgICAgICAgQWxsVGFzay5sb2FkQWxsVGFzaygpXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBwcm9qZWN0U2luZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgICAgICBQcm9qZWN0LnZpZXdQcm9qZWN0UGFnZShwcm9qZWN0KVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0U2luZ2xlKVxuICAgICAgICAgICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChkZWxldGVQcm9qZWN0QnRuKVxuXG4gICAgICAgICAgICBwcm9qZWN0TGlzdC5hcHBlbmRDaGlsZChwcm9qZWN0Q29udGFpbmVyKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHN0YXRpYyBkZWxldGVQcm9qZWN0KHByb2plY3QpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBwcm9qZWN0cy5pbmRleE9mKHByb2plY3QpXG4gICAgICAgIHByb2plY3RzLnNwbGljZShpbmRleCwgMSlcblxuICAgICAgICB0YXNrcy5mb3JFYWNoKCh0YXNrKT0+IHtcbiAgICAgICAgICAgIGlmKHRhc2sucHJvamVjdCA9PSBwcm9qZWN0KXtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrSW5kZXggPSB0YXNrcy5pbmRleE9mKHRhc2spXG4gICAgICAgICAgICAgICAgdGFza3Muc3BsaWNlKHRhc2tJbmRleCwgMSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpXG4gICAgICAgIFByb2plY3QuZ2VuZXJhdGVQcm9qZWN0cygpXG4gICAgfVxuXG4gICAgc3RhdGljIHZpZXdQcm9qZWN0UGFnZShwcm9qZWN0KSB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhYi10aXRsZScpXG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gcHJvamVjdDtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50JylcbiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnJ1xuXG4gICAgICAgIGNvbnN0IGFkZFRhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICBhZGRUYXNrQnRuLmlkID0gJ2FkZC10YXNrLWJ1dHRvbidcbiAgICAgICAgYWRkVGFza0J0bi50ZXh0Q29udGVudCA9ICcrIEFkZCBUYXNrJ1xuICAgICAgICBhZGRUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIE1ha2VOZXdUYXNrLmdlbmVyYXRlRm9ybShwcm9qZWN0KVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IHRhc2tMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgdGFza0xpc3QuaWQgPSAndGFzay1saXN0J1xuXG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoYWRkVGFza0J0bilcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZCh0YXNrTGlzdClcblxuICAgICAgICBMb2FkVGFzay5sb2FkVGFza0ZvclByb2plY3QocHJvamVjdCwgdGFza0xpc3QpXG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFByb2plY3QiLCJpbXBvcnQgVXNlckludGVyZmFjZSBmcm9tIFwiLi9tb2R1bGVzL1VJXCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBVc2VySW50ZXJmYWNlLmFjdGl2YXRlSW50ZXJmYWNlKCkpIiwiaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vUHJvamVjdFwiXG5pbXBvcnQgQWxsVGFzayBmcm9tIFwiLi9BbGxUYXNrXCJcblxuY2xhc3MgVXNlckludGVyZmFjZSB7XG4gICAgc3RhdGljIGFjdGl2YXRlSW50ZXJmYWNlKCkge1xuICAgICAgICBQcm9qZWN0LmFkZFByb2plY3RVaSgpXG5cbiAgICAgICAgY29uc3QgYWxsVGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGwtdGFza3MtdGFiJylcbiAgICAgICAgYWxsVGFzay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBBbGxUYXNrLmxvYWRBbGxUYXNrKClcbiAgICAgICAgfSlcblxuICAgICAgICBBbGxUYXNrLmxvYWRBbGxUYXNrKClcbiAgICAgICAgUHJvamVjdC5nZW5lcmF0ZVByb2plY3RzKClcbiAgICB9XG4gICAgXG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbnRlcmZhY2UiXSwibmFtZXMiOlsic3RvcmVkUHJvamVjdHMiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic3RvcmVkVGFza3MiLCJwcm9qZWN0cyIsInRhc2tzIiwibG9hZEFsbFRhc2siLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImNvbnRlbnQiLCJpbm5lckhUTUwiLCJ0YXNrTGlzdCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImFwcGVuZENoaWxkIiwiTG9hZFRhc2siLCJsb2FkQWxsVGFza3MiLCJUYXNrIiwiY29uc3RydWN0b3IiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwicHJvamVjdCIsImNoZWNrZWQiLCJ0aGlzIiwiTWFrZU5ld1Rhc2siLCJnZW5lcmF0ZUZvcm0iLCJ0YXNrVGl0bGUiLCJ0YXNrRGVzY3JpcHRpb24iLCJ0YXNrRGF0ZSIsImxvd1ByaW9CdG4iLCJtZWRQcmlvQnRuIiwiaGlnaFByaW9CdG4iLCJhZGRUYXNrYnRuIiwiY2FuY2VsQnRuIiwic2VsZWN0ZWRQcmlvIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTmFtZSIsInZpZXdQcm9qZWN0UGFnZSIsInZhbHVlIiwidHJpbSIsInRhc2siLCJwdXNoIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJsb2ciLCJhbGVydCIsImxvYWRUYXNrRm9yUHJvamVjdCIsImZvckVhY2giLCJsb2FkVGFza0dlbmVyYWwiLCJ0b2RheSIsInRhc2tDYXJkIiwiY2hlY2tCb3giLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJhZGQiLCJkZXRhaWxzIiwiRWRpdFRhc2siLCJlZGl0VGFzayIsImRhdGUiLCJkZWxldGVDYXJkIiwiY3VycmVudFByb2plY3QiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJQcm9qZWN0IiwiYWRkUHJvamVjdFVpIiwicHJvamVjdElucHV0IiwiYWRkUHJvamVjdEJ0biIsImNvbmZpcm1CdG4iLCJzdHlsZSIsImRpc3BsYXkiLCJpbnB1dCIsImluY2x1ZGVzIiwiZ2VuZXJhdGVQcm9qZWN0cyIsInByb2plY3RMaXN0IiwicHJvamVjdENvbnRhaW5lciIsInByb2plY3RTaW5nbGUiLCJkZWxldGVQcm9qZWN0QnRuIiwiZGVsZXRlUHJvamVjdCIsInRhc2tJbmRleCIsImFkZFRhc2tCdG4iLCJhY3RpdmF0ZUludGVyZmFjZSJdLCJzb3VyY2VSb290IjoiIn0=