(()=>{"use strict";const e=JSON.parse(localStorage.getItem("projects")),t=JSON.parse(localStorage.getItem("tasks")),a=e||[],n=t||[],c=class{static loadAllTask(){document.querySelector("#tab-title").textContent="All Tasks";const e=document.querySelector("#content");e.innerHTML="";const t=document.createElement("div");t.id="task-list",e.appendChild(t),i.loadAllTasks(t)}};class l{constructor(e,t,a,n,c,l){this.title=e,this.description=t,this.dueDate=a,this.priority=n,this.project=c,this.checked=l}}class o{static generateForm(e){document.querySelector("#content").innerHTML='\n        <div id="add-tasks-inputs-container" style="display: flex;">\n            <label for="task-title">Title: </label>\n            <input type="text" id="task-title" maxlength="40">\n            <label for="task-description">Description(Optional): </label>\n            <textarea id="task-description" maxlength="200"></textarea>\n            <label for="task-date">Date: </label>\n            <input type="date" id="task-date" max="9999-12-31">\n            <div id="priority-title">Priority: </div>\n            <div id="priority-button-container">\n                <button id="low-priority-btn">Low</button>\n                <button id="med-priority-btn">Med</button>\n                <button id="high-priority-btn">High</button>\n             </div>\n            <div id="add-cancel-task-container">\n            <button id="add-task-confirm-button">Add</button>\n            <button id="cancel-task-confirm-button">Cancel</button>\n            </div>\n        </div>\n        ';const t=document.querySelector("#task-title"),a=document.querySelector("#task-description"),c=document.querySelector("#task-date"),o=document.querySelector("#low-priority-btn"),i=document.querySelector("#med-priority-btn"),s=document.querySelector("#high-priority-btn"),d=document.querySelector("#add-task-confirm-button"),u=document.querySelector("#cancel-task-confirm-button");let m="";o.addEventListener("click",(()=>{o.className="selectedPrio",i.className="",s.className="",m="Low"})),i.addEventListener("click",(()=>{o.className="",i.className="selectedPrio",s.className="",m="Med"})),s.addEventListener("click",(()=>{o.className="",i.className="",s.className="selectedPrio",m="High"})),u.addEventListener("click",(()=>{r.viewProjectPage(e)})),d.addEventListener("click",(()=>{if(""!=t.value.trim()&&""!=c.value&&""!=m){const o=new l(t.value,a.value,c.value,m,e,!1);n.push(o),localStorage.setItem("tasks",JSON.stringify(n)),r.viewProjectPage(e)}else alert("Please fill all information")}))}}class i{static loadTaskForProject(e,t){n.forEach((a=>{a.project==e&&i.loadTaskGeneral(a,t,!1)}))}static loadAllTasks(e){n.forEach((t=>{i.loadTaskGeneral(t,e,!0)}))}static loadTaskGeneral(e,t,a){const l=document.createElement("div");l.className="task-card";const o=document.createElement("div");o.className="card-check-box",o.addEventListener("click",(()=>{0==e.checked?(e.checked=!0,o.classList.toggle("checked"),l.classList.toggle("checked"),localStorage.setItem("tasks",JSON.stringify(n))):(e.checked=!1,o.classList.toggle("checked"),l.classList.toggle("checked"),localStorage.setItem("tasks",JSON.stringify(n)))})),1==e.checked&&(o.classList.add("checked"),l.classList.add("checked"));const i=document.createElement("div");i.className="card-title",i.textContent=e.title;const d=document.createElement("button");d.className="card-details-button",d.textContent="details",d.addEventListener("click",(()=>{s.editTask(e.project,e,a)}));const u=document.createElement("div");u.className="card-date",u.textContent=e.dueDate;const m=document.createElement("div");m.className="card-prio",m.textContent=e.priority;const p=document.createElement("div");p.className="card-delete",p.textContent="X",p.addEventListener("click",(()=>{let t=e.project;const l=n.indexOf(e);n.splice(l,1),localStorage.setItem("tasks",JSON.stringify(n)),a?c.loadAllTask():r.viewProjectPage(t)})),l.appendChild(o),l.appendChild(i),l.appendChild(d),l.appendChild(u),l.appendChild(m),l.appendChild(p),t.appendChild(l)}}class s{static editTask(e,t,a){console.log(t.title),document.querySelector("#content").innerHTML=`\n        <div id="add-tasks-inputs-container" style="display: flex;">\n            <label for="task-title">Title: </label>\n            <input type="text" id="task-title" value="${t.title}" maxlength="40">\n            <label for="task-description">Description(Optional): </label>\n            <textarea id="task-description" maxlength="200">${t.description}</textarea>\n            <label for="task-date">Date: </label>\n            <input type="date" id="task-date" value="${t.dueDate}" max="9999-12-31">\n            <div id="priority-title">Priority: </div>\n            <div id="priority-button-container">\n                <button id="low-priority-btn">Low</button>\n                <button id="med-priority-btn">Med</button>\n                <button id="high-priority-btn">High</button>\n             </div>\n            <div id="add-cancel-task-container">\n            <button id="add-task-confirm-button">Add</button>\n            <button id="cancel-task-confirm-button">Cancel</button>\n            </div>\n        </div>\n        `;const l=document.querySelector("#task-title"),o=document.querySelector("#task-description"),i=document.querySelector("#task-date"),s=document.querySelector("#low-priority-btn"),d=document.querySelector("#med-priority-btn"),u=document.querySelector("#high-priority-btn"),m=document.querySelector("#add-task-confirm-button"),p=document.querySelector("#cancel-task-confirm-button");let k=t.priority;"Low"==k?s.className="selectedPrio":"Med"==k?d.className="selectedPrio":"High"==k&&(u.className="selectedPrio"),s.addEventListener("click",(()=>{s.className="selectedPrio",d.className="",u.className="",k="Low"})),d.addEventListener("click",(()=>{s.className="",d.className="selectedPrio",u.className="",k="Med"})),u.addEventListener("click",(()=>{s.className="",d.className="",u.className="selectedPrio",k="High"})),p.addEventListener("click",(()=>{a?c.loadAllTask():r.viewProjectPage(e)})),m.addEventListener("click",(()=>{""!=l.value.trim()&&""!=o.value.trim()&&""!=i.value&&""!=k?(t.title=l.value,t.description=o.value,t.dueDate=i.value,t.priority=k,console.log(n),localStorage.setItem("tasks",JSON.stringify(n)),a?c.loadAllTask():r.viewProjectPage(e)):(console.log(l.value.trim(),o.value.trim(),i.value,k),alert("Please fill all information"))}))}}class d{static addProjectUi(){const e=document.querySelector("#add-project-input-container"),t=document.querySelector("#add-projects-button");d.addProjectBtn(t,e),d.confirmBtn(t,e),d.cancelBtn(t,e)}static addProjectBtn(e,t){e.addEventListener("click",(()=>{e.style.display="none",t.style.display="grid",console.log(a)}))}static confirmBtn(e,t){document.querySelector("#add-button").addEventListener("click",(()=>{const n=document.querySelector("#add-project-input");a.includes(n.value)?alert(`${n.value} already exist`):""==n.value.trim()?alert("enter a value please"):(a.push(n.value),localStorage.setItem("projects",JSON.stringify(a)),d.generateProjects(),n.value="",t.style.display="none",e.style.display="block")}))}static cancelBtn(e,t){document.querySelector("#cancel-button").addEventListener("click",(()=>{document.querySelector("#add-project-input").value="",t.style.display="none",e.style.display="block"}))}static generateProjects(){const e=document.querySelector("#project-list");e.innerHTML="",a.forEach((t=>{const a=document.createElement("div");a.className="project-container";const n=document.createElement("button");n.className="project",n.textContent=t;const l=document.createElement("button");l.className="delete-project-button",l.textContent="X",l.addEventListener("click",(()=>{d.deleteProject(t),c.loadAllTask()})),n.addEventListener("click",(()=>{d.viewProjectPage(t)})),a.appendChild(n),a.appendChild(l),e.appendChild(a)}))}static deleteProject(e){const t=a.indexOf(e);a.splice(t,1),n.forEach((t=>{if(t.project==e){const e=n.indexOf(t);n.splice(e,1)}})),localStorage.setItem("tasks",JSON.stringify(n)),localStorage.setItem("projects",JSON.stringify(a)),d.generateProjects()}static viewProjectPage(e){document.querySelector("#tab-title").textContent=e;const t=document.querySelector("#content");t.innerHTML="";const a=document.createElement("button");a.id="add-task-button",a.textContent="+ Add Task",a.addEventListener("click",(()=>{o.generateForm(e)}));const n=document.createElement("div");n.id="task-list",t.appendChild(a),t.appendChild(n),i.loadTaskForProject(e,n)}}const r=d;document.addEventListener("DOMContentLoaded",class{static activateInterface(){r.addProjectUi(),document.querySelector("#all-tasks-tab").addEventListener("click",(()=>{c.loadAllTask()})),c.loadAllTask(),r.generateProjects()}}.activateInterface())})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWdCLEdBRWhELENBRUEsb0JBQU9HLENBQWMxRCxHQUNqQixNQUFNdUMsRUFBUTNELEVBQVM0RCxRQUFReEMsR0FDL0JwQixFQUFTNkQsT0FBT0YsRUFBTyxHQUV2QjFELEVBQU00QyxTQUFTTixJQUNYLEdBQUdBLEVBQUtuQixTQUFXQSxFQUFRLENBQ3ZCLE1BQU0yRCxFQUFZOUUsRUFBTTJELFFBQVFyQixHQUNoQ3RDLEVBQU00RCxPQUFPa0IsRUFBVyxFQUM1QixLQUVKbEYsYUFBYTRDLFFBQVEsUUFBUzlDLEtBQUsrQyxVQUFVekMsSUFDN0NKLGFBQWE0QyxRQUFRLFdBQVk5QyxLQUFLK0MsVUFBVTFDLElBQ2hEZ0UsRUFBUVMsa0JBQ1osQ0FFQSxzQkFBT3JDLENBQWdCaEIsR0FDTGpCLFNBQVNDLGNBQWMsY0FDL0JDLFlBQWNlLEVBQ3BCLE1BQU1kLEVBQVVILFNBQVNDLGNBQWMsWUFDdkNFLEVBQVFDLFVBQVksR0FFcEIsTUFBTXlFLEVBQWE3RSxTQUFTTSxjQUFjLFVBQzFDdUUsRUFBV3RFLEdBQUssa0JBQ2hCc0UsRUFBVzNFLFlBQWMsYUFDekIyRSxFQUFXOUMsaUJBQWlCLFNBQVMsS0FDakNYLEVBQVlDLGFBQWFKLEVBQU8sSUFHcEMsTUFBTVosRUFBV0wsU0FBU00sY0FBYyxPQUN4Q0QsRUFBU0UsR0FBSyxZQUVkSixFQUFRSyxZQUFZcUUsR0FDcEIxRSxFQUFRSyxZQUFZSCxHQUVwQkksRUFBU2dDLG1CQUFtQnhCLEVBQVNaLEVBQ3pDLEVBSUosVUNySEFMLFNBQVMrQixpQkFBaUIsbUJDQzFCLE1BQ0ksd0JBQU8rQyxHQUNILEVBQVFoQixlQUVROUQsU0FBU0MsY0FBYyxrQkFDL0I4QixpQkFBaUIsU0FBUyxLQUM5QixFQUFRaEMsYUFBWSxJQUd4QixFQUFRQSxjQUNSLEVBQVF1RSxrQkFDWixHRFp3RFEsb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL21vZHVsZXMvU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL21vZHVsZXMvQWxsVGFzay5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL21vZHVsZXMvVGFzay5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL21vZHVsZXMvUHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC1vb3AvLi9zcmMvbW9kdWxlcy9VSS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzdG9yZWRQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2plY3RzJykpO1xuY29uc3Qgc3RvcmVkVGFza3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0YXNrcycpKTtcblxuY29uc3QgcHJvamVjdHMgPSAgc3RvcmVkUHJvamVjdHMgfHwgW11cbmNvbnN0IHRhc2tzID0gc3RvcmVkVGFza3MgfHwgW11cblxuXG5leHBvcnQge3Byb2plY3RzLCB0YXNrcywgc3RvcmVkUHJvamVjdHMsIHN0b3JlZFRhc2tzfSIsImltcG9ydCB7IExvYWRUYXNrIH0gZnJvbSBcIi4vVGFza1wiXG5cbmNsYXNzIEFsbFRhc2sge1xuICAgIHN0YXRpYyBsb2FkQWxsVGFzaygpIHtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFiLXRpdGxlJylcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSAnQWxsIFRhc2tzJztcbiAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50JylcbiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnJ1xuICAgICAgICBjb25zdCB0YXNrTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHRhc2tMaXN0LmlkID0gJ3Rhc2stbGlzdCdcblxuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKHRhc2tMaXN0KVxuXG4gICAgICAgIExvYWRUYXNrLmxvYWRBbGxUYXNrcyh0YXNrTGlzdClcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFsbFRhc2siLCJpbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9Qcm9qZWN0XCJcbmltcG9ydCB7IHRhc2tzLCBzdG9yZWRQcm9qZWN0cywgc3RvcmVkVGFza3MsIHByb2plY3RzIH0gZnJvbSBcIi4vU3RvcmFnZVwiXG5pbXBvcnQgQWxsVGFzayBmcm9tIFwiLi9BbGxUYXNrXCJcblxuY2xhc3MgVGFzayB7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgcHJvamVjdCwgY2hlY2tlZCkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGVcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uXG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGVcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3RcbiAgICAgICAgdGhpcy5jaGVja2VkID0gY2hlY2tlZFxuICAgIH1cbn1cblxuY2xhc3MgTWFrZU5ld1Rhc2sge1xuICAgIHN0YXRpYyBnZW5lcmF0ZUZvcm0ocHJvamVjdCkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRlbnQnKVxuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBpZD1cImFkZC10YXNrcy1pbnB1dHMtY29udGFpbmVyXCIgc3R5bGU9XCJkaXNwbGF5OiBmbGV4O1wiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInRhc2stdGl0bGVcIj5UaXRsZTogPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwidGFzay10aXRsZVwiIG1heGxlbmd0aD1cIjQwXCI+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFzay1kZXNjcmlwdGlvblwiPkRlc2NyaXB0aW9uKE9wdGlvbmFsKTogPC9sYWJlbD5cbiAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cInRhc2stZGVzY3JpcHRpb25cIiBtYXhsZW5ndGg9XCIyMDBcIj48L3RleHRhcmVhPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInRhc2stZGF0ZVwiPkRhdGU6IDwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cImRhdGVcIiBpZD1cInRhc2stZGF0ZVwiIG1heD1cIjk5OTktMTItMzFcIj5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJwcmlvcml0eS10aXRsZVwiPlByaW9yaXR5OiA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJwcmlvcml0eS1idXR0b24tY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImxvdy1wcmlvcml0eS1idG5cIj5Mb3c8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwibWVkLXByaW9yaXR5LWJ0blwiPk1lZDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJoaWdoLXByaW9yaXR5LWJ0blwiPkhpZ2g8L2J1dHRvbj5cbiAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJhZGQtY2FuY2VsLXRhc2stY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwiYWRkLXRhc2stY29uZmlybS1idXR0b25cIj5BZGQ8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjYW5jZWwtdGFzay1jb25maXJtLWJ1dHRvblwiPkNhbmNlbDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXNrLXRpdGxlJyk7XG4gICAgICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXNrLWRlc2NyaXB0aW9uJyk7XG4gICAgICAgIGNvbnN0IHRhc2tEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2stZGF0ZScpXG4gICAgICAgIGNvbnN0IGxvd1ByaW9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG93LXByaW9yaXR5LWJ0bicpO1xuICAgICAgICBjb25zdCBtZWRQcmlvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lZC1wcmlvcml0eS1idG4nKTtcbiAgICAgICAgY29uc3QgaGlnaFByaW9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGlnaC1wcmlvcml0eS1idG4nKTtcblxuICAgICAgICBjb25zdCBhZGRUYXNrYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC10YXNrLWNvbmZpcm0tYnV0dG9uJyk7XG4gICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYW5jZWwtdGFzay1jb25maXJtLWJ1dHRvbicpO1xuXG4gICAgICAgIGxldCBzZWxlY3RlZFByaW8gPSAnJ1xuXG4gICAgICAgIGxvd1ByaW9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgbG93UHJpb0J0bi5jbGFzc05hbWUgPSAnc2VsZWN0ZWRQcmlvJ1xuICAgICAgICAgICAgbWVkUHJpb0J0bi5jbGFzc05hbWUgPSAnJ1xuICAgICAgICAgICAgaGlnaFByaW9CdG4uY2xhc3NOYW1lID0gJydcblxuICAgICAgICAgICAgc2VsZWN0ZWRQcmlvID0gJ0xvdydcbiAgICAgICAgfSlcbiAgICAgICAgbWVkUHJpb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBsb3dQcmlvQnRuLmNsYXNzTmFtZSA9ICcnXG4gICAgICAgICAgICBtZWRQcmlvQnRuLmNsYXNzTmFtZSA9ICdzZWxlY3RlZFByaW8nXG4gICAgICAgICAgICBoaWdoUHJpb0J0bi5jbGFzc05hbWUgPSAnJ1xuXG4gICAgICAgICAgICBzZWxlY3RlZFByaW8gPSAnTWVkJ1xuICAgICAgICB9KVxuICAgICAgICBoaWdoUHJpb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBsb3dQcmlvQnRuLmNsYXNzTmFtZSA9ICcnXG4gICAgICAgICAgICBtZWRQcmlvQnRuLmNsYXNzTmFtZSA9ICcnXG4gICAgICAgICAgICBoaWdoUHJpb0J0bi5jbGFzc05hbWUgPSAnc2VsZWN0ZWRQcmlvJ1xuXG4gICAgICAgICAgICBzZWxlY3RlZFByaW8gPSAnSGlnaCdcbiAgICAgICAgfSlcblxuICAgICAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgUHJvamVjdC52aWV3UHJvamVjdFBhZ2UocHJvamVjdClcbiAgICAgICAgfSlcblxuICAgICAgICBhZGRUYXNrYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGlmICh0YXNrVGl0bGUudmFsdWUudHJpbSgpICE9ICcnICYmIHRhc2tEYXRlLnZhbHVlICE9ICcnICYmIHNlbGVjdGVkUHJpbyAhPSAnJyl7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFzayA9IG5ldyBUYXNrKHRhc2tUaXRsZS52YWx1ZSwgdGFza0Rlc2NyaXB0aW9uLnZhbHVlLCB0YXNrRGF0ZS52YWx1ZSwgc2VsZWN0ZWRQcmlvLCBwcm9qZWN0LCBmYWxzZSlcbiAgICAgICAgICAgICAgICB0YXNrcy5wdXNoKHRhc2spXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcbiAgICAgICAgICAgICAgICBQcm9qZWN0LnZpZXdQcm9qZWN0UGFnZShwcm9qZWN0KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbGVydCgnUGxlYXNlIGZpbGwgYWxsIGluZm9ybWF0aW9uJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBcbiAgICAgIFxuICAgIH1cbn1cblxuY2xhc3MgTG9hZFRhc2sge1xuICAgIHN0YXRpYyBsb2FkVGFza0ZvclByb2plY3QocHJvamVjdCwgdGFza0xpc3QpIHtcbiAgICAgICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4gIHtcbiAgICAgICAgICAgIGlmICh0YXNrLnByb2plY3QgPT0gcHJvamVjdCl7XG4gICAgICAgICAgICAgICAgTG9hZFRhc2subG9hZFRhc2tHZW5lcmFsKHRhc2ssIHRhc2tMaXN0LCBmYWxzZSlcblxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHN0YXRpYyBsb2FkQWxsVGFza3ModGFza0xpc3QpIHtcbiAgICAgICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4gIHtcbiAgICAgICAgICAgICAgICBMb2FkVGFzay5sb2FkVGFza0dlbmVyYWwodGFzaywgdGFza0xpc3QsIHRydWUpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc3RhdGljIGxvYWRUYXNrR2VuZXJhbCh0YXNrLCB0YXNrTGlzdCwgdG9kYXkpIHtcbiAgICAgICAgY29uc3QgdGFza0NhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgIHRhc2tDYXJkLmNsYXNzTmFtZSA9ICd0YXNrLWNhcmQnXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgIGNoZWNrQm94LmNsYXNzTmFtZSA9ICdjYXJkLWNoZWNrLWJveCdcbiAgICAgICAgICAgICAgICBjaGVja0JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrLmNoZWNrZWQgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suY2hlY2tlZCA9IHRydWUgXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0JveC5jbGFzc0xpc3QudG9nZ2xlKCdjaGVja2VkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXJkLmNsYXNzTGlzdC50b2dnbGUoJ2NoZWNrZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suY2hlY2tlZCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0JveC5jbGFzc0xpc3QudG9nZ2xlKCdjaGVja2VkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXJkLmNsYXNzTGlzdC50b2dnbGUoJ2NoZWNrZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICBpZiAodGFzay5jaGVja2VkID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3guY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpXG4gICAgICAgICAgICAgICAgICAgIHRhc2tDYXJkLmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgICAgICB0aXRsZS5jbGFzc05hbWUgPSAnY2FyZC10aXRsZSdcbiAgICAgICAgICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRhc2sudGl0bGU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAgICAgICAgICAgICBkZXRhaWxzLmNsYXNzTmFtZSA9ICdjYXJkLWRldGFpbHMtYnV0dG9uJ1xuICAgICAgICAgICAgICAgIGRldGFpbHMudGV4dENvbnRlbnQgPSAnZGV0YWlscydcbiAgICAgICAgICAgICAgICBkZXRhaWxzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIEVkaXRUYXNrLmVkaXRUYXNrKHRhc2sucHJvamVjdCwgdGFzaywgdG9kYXkpXG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgIGRhdGUuY2xhc3NOYW1lID0gJ2NhcmQtZGF0ZSdcbiAgICAgICAgICAgICAgICBkYXRlLnRleHRDb250ZW50ID0gdGFzay5kdWVEYXRlXG5cbiAgICAgICAgICAgICAgICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICAgICAgcHJpb3JpdHkuY2xhc3NOYW1lID0gJ2NhcmQtcHJpbydcbiAgICAgICAgICAgICAgICBwcmlvcml0eS50ZXh0Q29udGVudCA9IHRhc2sucHJpb3JpdHlcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgIGRlbGV0ZUNhcmQuY2xhc3NOYW1lID0gJ2NhcmQtZGVsZXRlJ1xuICAgICAgICAgICAgICAgIGRlbGV0ZUNhcmQudGV4dENvbnRlbnQgPSAnWCdcbiAgICAgICAgICAgICAgICBkZWxldGVDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50UHJvamVjdCA9IHRhc2sucHJvamVjdFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRhc2tzLmluZGV4T2YodGFzaylcbiAgICAgICAgICAgICAgICAgICAgdGFza3Muc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza3MnLCBKU09OLnN0cmluZ2lmeSh0YXNrcykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9kYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbFRhc2subG9hZEFsbFRhc2soKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgUHJvamVjdC52aWV3UHJvamVjdFBhZ2UoY3VycmVudFByb2plY3QpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgdGFza0NhcmQuYXBwZW5kQ2hpbGQoY2hlY2tCb3gpXG4gICAgICAgICAgICAgICAgdGFza0NhcmQuYXBwZW5kQ2hpbGQodGl0bGUpXG4gICAgICAgICAgICAgICAgdGFza0NhcmQuYXBwZW5kQ2hpbGQoZGV0YWlscylcbiAgICAgICAgICAgICAgICB0YXNrQ2FyZC5hcHBlbmRDaGlsZChkYXRlKVxuICAgICAgICAgICAgICAgIHRhc2tDYXJkLmFwcGVuZENoaWxkKHByaW9yaXR5KVxuICAgICAgICAgICAgICAgIHRhc2tDYXJkLmFwcGVuZENoaWxkKGRlbGV0ZUNhcmQpXG5cblxuXG4gICAgICAgICAgICAgICAgdGFza0xpc3QuYXBwZW5kQ2hpbGQodGFza0NhcmQpXG4gICAgfVxufVxuXG5jbGFzcyBFZGl0VGFzayB7XG5cbiAgICBzdGF0aWMgZWRpdFRhc2socHJvamVjdCwgdGFzaywgdG9kYXkpIHtcbiAgICAgICAgY29uc29sZS5sb2codGFzay50aXRsZSlcbiAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50JylcbiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgaWQ9XCJhZGQtdGFza3MtaW5wdXRzLWNvbnRhaW5lclwiIHN0eWxlPVwiZGlzcGxheTogZmxleDtcIj5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ0YXNrLXRpdGxlXCI+VGl0bGU6IDwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInRhc2stdGl0bGVcIiB2YWx1ZT1cIiR7dGFzay50aXRsZX1cIiBtYXhsZW5ndGg9XCI0MFwiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInRhc2stZGVzY3JpcHRpb25cIj5EZXNjcmlwdGlvbihPcHRpb25hbCk6IDwvbGFiZWw+XG4gICAgICAgICAgICA8dGV4dGFyZWEgaWQ9XCJ0YXNrLWRlc2NyaXB0aW9uXCIgbWF4bGVuZ3RoPVwiMjAwXCI+JHt0YXNrLmRlc2NyaXB0aW9ufTwvdGV4dGFyZWE+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFzay1kYXRlXCI+RGF0ZTogPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIGlkPVwidGFzay1kYXRlXCIgdmFsdWU9XCIke3Rhc2suZHVlRGF0ZX1cIiBtYXg9XCI5OTk5LTEyLTMxXCI+XG4gICAgICAgICAgICA8ZGl2IGlkPVwicHJpb3JpdHktdGl0bGVcIj5Qcmlvcml0eTogPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGlkPVwicHJpb3JpdHktYnV0dG9uLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJsb3ctcHJpb3JpdHktYnRuXCI+TG93PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cIm1lZC1wcmlvcml0eS1idG5cIj5NZWQ8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiaGlnaC1wcmlvcml0eS1idG5cIj5IaWdoPC9idXR0b24+XG4gICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGlkPVwiYWRkLWNhbmNlbC10YXNrLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImFkZC10YXNrLWNvbmZpcm0tYnV0dG9uXCI+QWRkPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwiY2FuY2VsLXRhc2stY29uZmlybS1idXR0b25cIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay10aXRsZScpO1xuICAgICAgICBjb25zdCB0YXNrRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay1kZXNjcmlwdGlvbicpO1xuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXNrLWRhdGUnKVxuICAgICAgICBjb25zdCBsb3dQcmlvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvdy1wcmlvcml0eS1idG4nKTtcbiAgICAgICAgY29uc3QgbWVkUHJpb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZWQtcHJpb3JpdHktYnRuJyk7XG4gICAgICAgIGNvbnN0IGhpZ2hQcmlvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hpZ2gtcHJpb3JpdHktYnRuJyk7XG5cbiAgICAgICAgY29uc3QgYWRkVGFza2J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtdGFzay1jb25maXJtLWJ1dHRvbicpO1xuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FuY2VsLXRhc2stY29uZmlybS1idXR0b24nKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBzZWxlY3RlZFByaW8gPSB0YXNrLnByaW9yaXR5XG4gICAgICAgIGlmKHNlbGVjdGVkUHJpbyA9PSAnTG93Jykge1xuICAgICAgICAgICAgbG93UHJpb0J0bi5jbGFzc05hbWUgPSAnc2VsZWN0ZWRQcmlvJ1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkUHJpbyA9PSAnTWVkJykge1xuICAgICAgICAgICAgbWVkUHJpb0J0bi5jbGFzc05hbWUgPSAnc2VsZWN0ZWRQcmlvJ1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkUHJpbyA9PSAnSGlnaCcpIHtcbiAgICAgICAgICAgIGhpZ2hQcmlvQnRuLmNsYXNzTmFtZSA9ICdzZWxlY3RlZFByaW8nXG4gICAgICAgIH1cblxuICAgICAgICBsb3dQcmlvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGxvd1ByaW9CdG4uY2xhc3NOYW1lID0gJ3NlbGVjdGVkUHJpbydcbiAgICAgICAgICAgIG1lZFByaW9CdG4uY2xhc3NOYW1lID0gJydcbiAgICAgICAgICAgIGhpZ2hQcmlvQnRuLmNsYXNzTmFtZSA9ICcnXG5cbiAgICAgICAgICAgIHNlbGVjdGVkUHJpbyA9ICdMb3cnXG4gICAgICAgIH0pXG4gICAgICAgIG1lZFByaW9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgbG93UHJpb0J0bi5jbGFzc05hbWUgPSAnJ1xuICAgICAgICAgICAgbWVkUHJpb0J0bi5jbGFzc05hbWUgPSAnc2VsZWN0ZWRQcmlvJ1xuICAgICAgICAgICAgaGlnaFByaW9CdG4uY2xhc3NOYW1lID0gJydcblxuICAgICAgICAgICAgc2VsZWN0ZWRQcmlvID0gJ01lZCdcbiAgICAgICAgfSlcbiAgICAgICAgaGlnaFByaW9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgbG93UHJpb0J0bi5jbGFzc05hbWUgPSAnJ1xuICAgICAgICAgICAgbWVkUHJpb0J0bi5jbGFzc05hbWUgPSAnJ1xuICAgICAgICAgICAgaGlnaFByaW9CdG4uY2xhc3NOYW1lID0gJ3NlbGVjdGVkUHJpbydcblxuICAgICAgICAgICAgc2VsZWN0ZWRQcmlvID0gJ0hpZ2gnXG4gICAgICAgIH0pXG5cbiAgICAgICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGlmICh0b2RheSl7XG4gICAgICAgICAgICAgICAgQWxsVGFzay5sb2FkQWxsVGFzaygpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFByb2plY3Qudmlld1Byb2plY3RQYWdlKHByb2plY3QpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgYWRkVGFza2J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBpZiAodGFza1RpdGxlLnZhbHVlLnRyaW0oKSAhPSAnJyAmJiB0YXNrRGVzY3JpcHRpb24udmFsdWUudHJpbSgpICE9ICcnICYmIHRhc2tEYXRlLnZhbHVlICE9ICcnICYmIHNlbGVjdGVkUHJpbyAhPSAnJyl7XG4gICAgICAgICAgICAgICAgdGFzay50aXRsZSA9IHRhc2tUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgICAgICB0YXNrLmRlc2NyaXB0aW9uID0gdGFza0Rlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgIHRhc2suZHVlRGF0ZSA9IHRhc2tEYXRlLnZhbHVlO1xuICAgICAgICAgICAgICAgIHRhc2sucHJpb3JpdHkgPSBzZWxlY3RlZFByaW87XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFza3MpXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcbiAgICAgICAgICAgICAgICBpZiAodG9kYXkpe1xuICAgICAgICAgICAgICAgICAgICBBbGxUYXNrLmxvYWRBbGxUYXNrKClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBQcm9qZWN0LnZpZXdQcm9qZWN0UGFnZShwcm9qZWN0KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFza1RpdGxlLnZhbHVlLnRyaW0oKSwgdGFza0Rlc2NyaXB0aW9uLnZhbHVlLnRyaW0oKSwgdGFza0RhdGUudmFsdWUsIHNlbGVjdGVkUHJpbylcbiAgICAgICAgICAgICAgICBhbGVydCgnUGxlYXNlIGZpbGwgYWxsIGluZm9ybWF0aW9uJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuXG4gICAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IFRhc2tcbmV4cG9ydCB7TWFrZU5ld1Rhc2ssIExvYWRUYXNrfSIsImltcG9ydCBVc2VySW50ZXJmYWNlIGZyb20gXCIuL1VJXCI7XG5pbXBvcnQgeyBwcm9qZWN0cywgc3RvcmVkUHJvamVjdHMsIHN0b3JlZFRhc2tzLCB0YXNrcyB9IGZyb20gXCIuL1N0b3JhZ2VcIjtcbmltcG9ydCB7IE1ha2VOZXdUYXNrLCBMb2FkVGFzayB9IGZyb20gXCIuL1Rhc2tcIjtcbmltcG9ydCBBbGxUYXNrIGZyb20gXCIuL0FsbFRhc2tcIjtcblxuY2xhc3MgUHJvamVjdCB7XG4gICAgc3RhdGljIGFkZFByb2plY3RVaSgpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1wcm9qZWN0LWlucHV0LWNvbnRhaW5lcicpO1xuICAgICAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1wcm9qZWN0cy1idXR0b24nKVxuICAgICAgICBQcm9qZWN0LmFkZFByb2plY3RCdG4oYWRkUHJvamVjdEJ0biwgcHJvamVjdElucHV0KVxuICAgICAgICBQcm9qZWN0LmNvbmZpcm1CdG4oYWRkUHJvamVjdEJ0biwgcHJvamVjdElucHV0KVxuICAgICAgICBQcm9qZWN0LmNhbmNlbEJ0bihhZGRQcm9qZWN0QnRuLCBwcm9qZWN0SW5wdXQpXG4gICAgfVxuICAgIHN0YXRpYyBhZGRQcm9qZWN0QnRuKGFkZFByb2plY3RCdG4sIHByb2plY3RJbnB1dCkge1xuICAgICAgICBhZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB7XG4gICAgICAgICAgICBhZGRQcm9qZWN0QnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgICAgIHByb2plY3RJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ2dyaWQnXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0cylcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzdGF0aWMgY29uZmlybUJ0bihhZGRQcm9qZWN0QnRuLCBwcm9qZWN0SW5wdXQpIHtcbiAgICAgICAgY29uc3QgYWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1idXR0b24nKVxuICAgICAgICBhZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1wcm9qZWN0LWlucHV0JylcbiAgICAgICAgICAgIGlmIChwcm9qZWN0cy5pbmNsdWRlcyhpbnB1dC52YWx1ZSkpe1xuICAgICAgICAgICAgICAgIGFsZXJ0KGAke2lucHV0LnZhbHVlfSBhbHJlYWR5IGV4aXN0YClcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQudmFsdWUudHJpbSgpID09ICcnKXtcbiAgICAgICAgICAgICAgICBhbGVydCgnZW50ZXIgYSB2YWx1ZSBwbGVhc2UnKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0cy5wdXNoKGlucHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xuICAgICAgICAgICAgICAgIFByb2plY3QuZ2VuZXJhdGVQcm9qZWN0cygpXG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPScnXG4gICAgICAgICAgICAgICAgcHJvamVjdElucHV0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgICAgICAgICBhZGRQcm9qZWN0QnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzdGF0aWMgY2FuY2VsQnRuKGFkZFByb2plY3RCdG4sIHByb2plY3RJbnB1dCkge1xuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FuY2VsLWJ1dHRvbicpXG4gICAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtcHJvamVjdC1pbnB1dCcpXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9JydcbiAgICAgICAgICAgIHByb2plY3RJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICBhZGRQcm9qZWN0QnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc3RhdGljIGdlbmVyYXRlUHJvamVjdHMoKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QtbGlzdCcpXG4gICAgICAgIHByb2plY3RMaXN0LmlubmVySFRNTCA9ICcnXG4gICAgICAgIHByb2plY3RzLmZvckVhY2goKHByb2plY3QpPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICBwcm9qZWN0Q29udGFpbmVyLmNsYXNzTmFtZSA9ICdwcm9qZWN0LWNvbnRhaW5lcidcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RTaW5nbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICAgICAgcHJvamVjdFNpbmdsZS5jbGFzc05hbWUgPSAncHJvamVjdCdcbiAgICAgICAgICAgIHByb2plY3RTaW5nbGUudGV4dENvbnRlbnQgPSBwcm9qZWN0XG4gICAgICAgICAgICBjb25zdCBkZWxldGVQcm9qZWN0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAgICAgICAgIGRlbGV0ZVByb2plY3RCdG4uY2xhc3NOYW1lID0gJ2RlbGV0ZS1wcm9qZWN0LWJ1dHRvbidcbiAgICAgICAgICAgIGRlbGV0ZVByb2plY3RCdG4udGV4dENvbnRlbnQgPSAnWCdcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVsZXRlUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICAgICAgUHJvamVjdC5kZWxldGVQcm9qZWN0KHByb2plY3QpXG4gICAgICAgICAgICAgICAgQWxsVGFzay5sb2FkQWxsVGFzaygpXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBwcm9qZWN0U2luZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgICAgICBQcm9qZWN0LnZpZXdQcm9qZWN0UGFnZShwcm9qZWN0KVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0U2luZ2xlKVxuICAgICAgICAgICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChkZWxldGVQcm9qZWN0QnRuKVxuXG4gICAgICAgICAgICBwcm9qZWN0TGlzdC5hcHBlbmRDaGlsZChwcm9qZWN0Q29udGFpbmVyKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHN0YXRpYyBkZWxldGVQcm9qZWN0KHByb2plY3QpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBwcm9qZWN0cy5pbmRleE9mKHByb2plY3QpXG4gICAgICAgIHByb2plY3RzLnNwbGljZShpbmRleCwgMSlcblxuICAgICAgICB0YXNrcy5mb3JFYWNoKCh0YXNrKT0+IHtcbiAgICAgICAgICAgIGlmKHRhc2sucHJvamVjdCA9PSBwcm9qZWN0KXtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrSW5kZXggPSB0YXNrcy5pbmRleE9mKHRhc2spXG4gICAgICAgICAgICAgICAgdGFza3Muc3BsaWNlKHRhc2tJbmRleCwgMSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpXG4gICAgICAgIFByb2plY3QuZ2VuZXJhdGVQcm9qZWN0cygpXG4gICAgfVxuXG4gICAgc3RhdGljIHZpZXdQcm9qZWN0UGFnZShwcm9qZWN0KSB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhYi10aXRsZScpXG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gcHJvamVjdDtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50JylcbiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnJ1xuXG4gICAgICAgIGNvbnN0IGFkZFRhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICBhZGRUYXNrQnRuLmlkID0gJ2FkZC10YXNrLWJ1dHRvbidcbiAgICAgICAgYWRkVGFza0J0bi50ZXh0Q29udGVudCA9ICcrIEFkZCBUYXNrJ1xuICAgICAgICBhZGRUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIE1ha2VOZXdUYXNrLmdlbmVyYXRlRm9ybShwcm9qZWN0KVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IHRhc2tMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgdGFza0xpc3QuaWQgPSAndGFzay1saXN0J1xuXG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoYWRkVGFza0J0bilcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZCh0YXNrTGlzdClcblxuICAgICAgICBMb2FkVGFzay5sb2FkVGFza0ZvclByb2plY3QocHJvamVjdCwgdGFza0xpc3QpXG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFByb2plY3QiLCJpbXBvcnQgVXNlckludGVyZmFjZSBmcm9tIFwiLi9tb2R1bGVzL1VJXCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBVc2VySW50ZXJmYWNlLmFjdGl2YXRlSW50ZXJmYWNlKCkpIiwiaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vUHJvamVjdFwiXG5pbXBvcnQgQWxsVGFzayBmcm9tIFwiLi9BbGxUYXNrXCJcblxuY2xhc3MgVXNlckludGVyZmFjZSB7XG4gICAgc3RhdGljIGFjdGl2YXRlSW50ZXJmYWNlKCkge1xuICAgICAgICBQcm9qZWN0LmFkZFByb2plY3RVaSgpXG5cbiAgICAgICAgY29uc3QgYWxsVGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGwtdGFza3MtdGFiJylcbiAgICAgICAgYWxsVGFzay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBBbGxUYXNrLmxvYWRBbGxUYXNrKClcbiAgICAgICAgfSlcblxuICAgICAgICBBbGxUYXNrLmxvYWRBbGxUYXNrKClcbiAgICAgICAgUHJvamVjdC5nZW5lcmF0ZVByb2plY3RzKClcbiAgICB9XG4gICAgXG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbnRlcmZhY2UiXSwibmFtZXMiOlsic3RvcmVkUHJvamVjdHMiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic3RvcmVkVGFza3MiLCJwcm9qZWN0cyIsInRhc2tzIiwibG9hZEFsbFRhc2siLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImNvbnRlbnQiLCJpbm5lckhUTUwiLCJ0YXNrTGlzdCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImFwcGVuZENoaWxkIiwiTG9hZFRhc2siLCJsb2FkQWxsVGFza3MiLCJUYXNrIiwiY29uc3RydWN0b3IiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwicHJvamVjdCIsImNoZWNrZWQiLCJ0aGlzIiwiTWFrZU5ld1Rhc2siLCJnZW5lcmF0ZUZvcm0iLCJ0YXNrVGl0bGUiLCJ0YXNrRGVzY3JpcHRpb24iLCJ0YXNrRGF0ZSIsImxvd1ByaW9CdG4iLCJtZWRQcmlvQnRuIiwiaGlnaFByaW9CdG4iLCJhZGRUYXNrYnRuIiwiY2FuY2VsQnRuIiwic2VsZWN0ZWRQcmlvIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTmFtZSIsInZpZXdQcm9qZWN0UGFnZSIsInZhbHVlIiwidHJpbSIsInRhc2siLCJwdXNoIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImFsZXJ0IiwibG9hZFRhc2tGb3JQcm9qZWN0IiwiZm9yRWFjaCIsImxvYWRUYXNrR2VuZXJhbCIsInRvZGF5IiwidGFza0NhcmQiLCJjaGVja0JveCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImFkZCIsImRldGFpbHMiLCJFZGl0VGFzayIsImVkaXRUYXNrIiwiZGF0ZSIsImRlbGV0ZUNhcmQiLCJjdXJyZW50UHJvamVjdCIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImNvbnNvbGUiLCJsb2ciLCJQcm9qZWN0IiwiYWRkUHJvamVjdFVpIiwicHJvamVjdElucHV0IiwiYWRkUHJvamVjdEJ0biIsImNvbmZpcm1CdG4iLCJzdHlsZSIsImRpc3BsYXkiLCJpbnB1dCIsImluY2x1ZGVzIiwiZ2VuZXJhdGVQcm9qZWN0cyIsInByb2plY3RMaXN0IiwicHJvamVjdENvbnRhaW5lciIsInByb2plY3RTaW5nbGUiLCJkZWxldGVQcm9qZWN0QnRuIiwiZGVsZXRlUHJvamVjdCIsInRhc2tJbmRleCIsImFkZFRhc2tCdG4iLCJhY3RpdmF0ZUludGVyZmFjZSJdLCJzb3VyY2VSb290IjoiIn0=