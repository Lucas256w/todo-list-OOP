(()=>{"use strict";const e=JSON.parse(localStorage.getItem("projects")),t=JSON.parse(localStorage.getItem("tasks")),a=e||[],n=t||[],c=class{static loadAllTask(){document.querySelector("#tab-title").textContent="All Tasks";const e=document.querySelector("#content");e.innerHTML="";const t=document.createElement("div");t.id="task-list",e.appendChild(t),i.loadAllTasks(t)}};class l{constructor(e,t,a,n,c,l){this.title=e,this.description=t,this.dueDate=a,this.priority=n,this.project=c,this.checked=l}}class o{static generateForm(e){document.querySelector("#content").innerHTML='\n        <div id="add-tasks-inputs-container" style="display: flex;">\n            <label for="task-title">Title: </label>\n            <input type="text" id="task-title" maxlength="40">\n            <label for="task-description">Description: </label>\n            <textarea id="task-description" maxlength="200"></textarea>\n            <label for="task-date">Date: </label>\n            <input type="date" id="task-date" max="9999-12-31">\n            <div id="priority-title">Priority: </div>\n            <div id="priority-button-container">\n                <button id="low-priority-btn">Low</button>\n                <button id="med-priority-btn">Med</button>\n                <button id="high-priority-btn">High</button>\n             </div>\n            <div id="add-cancel-task-container">\n            <button id="add-task-confirm-button">Add</button>\n            <button id="cancel-task-confirm-button">Cancel</button>\n            </div>\n        </div>\n        ';const t=document.querySelector("#task-title"),a=document.querySelector("#task-description"),c=document.querySelector("#task-date"),o=document.querySelector("#low-priority-btn"),i=document.querySelector("#med-priority-btn"),s=document.querySelector("#high-priority-btn"),d=document.querySelector("#add-task-confirm-button"),u=document.querySelector("#cancel-task-confirm-button");let m="";o.addEventListener("click",(()=>{o.className="selectedPrio",i.className="",s.className="",m="Low"})),i.addEventListener("click",(()=>{o.className="",i.className="selectedPrio",s.className="",m="Med"})),s.addEventListener("click",(()=>{o.className="",i.className="",s.className="selectedPrio",m="High"})),u.addEventListener("click",(()=>{r.viewProjectPage(e)})),d.addEventListener("click",(()=>{if(""!=t.value.trim()&&""!=a.value.trim()&&""!=c.value&&""!=m){const o=new l(t.value,a.value,c.value,m,e,!1);n.push(o),localStorage.setItem("tasks",JSON.stringify(n)),console.log(n),r.viewProjectPage(e)}else console.log(t.value.trim(),a.value.trim(),c.value,m),alert("Please fill all information")}))}}class i{static loadTaskForProject(e,t){n.forEach((a=>{a.project==e&&i.loadTaskGeneral(a,t,!1)}))}static loadAllTasks(e){n.forEach((t=>{i.loadTaskGeneral(t,e,!0)}))}static loadTaskGeneral(e,t,a){const l=document.createElement("div");l.className="task-card";const o=document.createElement("div");o.className="card-check-box",o.addEventListener("click",(()=>{0==e.checked?(e.checked=!0,o.classList.toggle("checked"),l.classList.toggle("checked")):(e.checked=!1,o.classList.toggle("checked"),l.classList.toggle("checked"))})),1==e.checked&&(o.classList.add("checked"),l.classList.add("checked"));const i=document.createElement("div");i.className="card-title",i.textContent=e.title;const d=document.createElement("button");d.className="card-details-button",d.textContent="details",d.addEventListener("click",(()=>{s.editTask(e.project,e,a)}));const u=document.createElement("div");u.className="card-date",u.textContent=e.dueDate;const m=document.createElement("div");m.className="card-prio",m.textContent=e.priority;const p=document.createElement("div");p.className="card-delete",p.textContent="X",p.addEventListener("click",(()=>{let t=e.project;const l=n.indexOf(e);n.splice(l,1),localStorage.setItem("tasks",JSON.stringify(n)),a?c.loadAllTask():r.viewProjectPage(t)})),l.appendChild(o),l.appendChild(i),l.appendChild(d),l.appendChild(u),l.appendChild(m),l.appendChild(p),t.appendChild(l)}}class s{static editTask(e,t,a){document.querySelector("#content").innerHTML=`\n        <div id="add-tasks-inputs-container" style="display: flex;">\n            <label for="task-title">Title: </label>\n            <input type="text" id="task-title" value=${t.title} maxlength="40">\n            <label for="task-description">Description: </label>\n            <textarea id="task-description" maxlength="200">${t.description}</textarea>\n            <label for="task-date">Date: </label>\n            <input type="date" id="task-date" value=${t.dueDate} max="9999-12-31">\n            <div id="priority-title">Priority: </div>\n            <div id="priority-button-container">\n                <button id="low-priority-btn">Low</button>\n                <button id="med-priority-btn">Med</button>\n                <button id="high-priority-btn">High</button>\n             </div>\n            <div id="add-cancel-task-container">\n            <button id="add-task-confirm-button">Add</button>\n            <button id="cancel-task-confirm-button">Cancel</button>\n            </div>\n        </div>\n        `;const l=document.querySelector("#task-title"),o=document.querySelector("#task-description"),i=document.querySelector("#task-date"),s=document.querySelector("#low-priority-btn"),d=document.querySelector("#med-priority-btn"),u=document.querySelector("#high-priority-btn"),m=document.querySelector("#add-task-confirm-button"),p=document.querySelector("#cancel-task-confirm-button");let k=t.priority;"Low"==k?s.className="selectedPrio":"Med"==k?d.className="selectedPrio":"High"==k&&(u.className="selectedPrio"),s.addEventListener("click",(()=>{s.className="selectedPrio",d.className="",u.className="",k="Low"})),d.addEventListener("click",(()=>{s.className="",d.className="selectedPrio",u.className="",k="Med"})),u.addEventListener("click",(()=>{s.className="",d.className="",u.className="selectedPrio",k="High"})),p.addEventListener("click",(()=>{a?c.loadAllTask():r.viewProjectPage(e)})),m.addEventListener("click",(()=>{""!=l.value.trim()&&""!=o.value.trim()&&""!=i.value&&""!=k?(t.title=l.value,t.description=o.value,t.dueDate=i.value,t.priority=k,console.log(n),localStorage.setItem("tasks",JSON.stringify(n)),a?c.loadAllTask():r.viewProjectPage(e)):(console.log(l.value.trim(),o.value.trim(),i.value,k),alert("Please fill all information"))}))}}class d{static addProjectUi(){const e=document.querySelector("#add-project-input-container"),t=document.querySelector("#add-projects-button");d.addProjectBtn(t,e),d.confirmBtn(t,e),d.cancelBtn(t,e)}static addProjectBtn(e,t){e.addEventListener("click",(()=>{e.style.display="none",t.style.display="grid",console.log(a)}))}static confirmBtn(e,t){document.querySelector("#add-button").addEventListener("click",(()=>{const n=document.querySelector("#add-project-input");a.includes(n.value)?alert(`${n.value} already exist`):""==n.value.trim()?alert("enter a value please"):(a.push(n.value),localStorage.setItem("projects",JSON.stringify(a)),d.generateProjects(),n.value="",t.style.display="none",e.style.display="block")}))}static cancelBtn(e,t){document.querySelector("#cancel-button").addEventListener("click",(()=>{document.querySelector("#add-project-input").value="",t.style.display="none",e.style.display="block"}))}static generateProjects(){const e=document.querySelector("#project-list");e.innerHTML="",a.forEach((t=>{const a=document.createElement("div");a.className="project-container";const n=document.createElement("button");n.className="project",n.textContent=t;const l=document.createElement("button");l.className="delete-project-button",l.textContent="X",l.addEventListener("click",(()=>{d.deleteProject(t),c.loadAllTask()})),n.addEventListener("click",(()=>{d.viewProjectPage(t)})),a.appendChild(n),a.appendChild(l),e.appendChild(a)}))}static deleteProject(e){const t=a.indexOf(e);a.splice(t,1),n.forEach((t=>{if(t.project==e){const e=n.indexOf(t);n.splice(e,1)}})),localStorage.setItem("tasks",JSON.stringify(n)),localStorage.setItem("projects",JSON.stringify(a)),d.generateProjects()}static viewProjectPage(e){document.querySelector("#tab-title").textContent=e;const t=document.querySelector("#content");t.innerHTML="";const a=document.createElement("button");a.id="add-task-button",a.textContent="+ Add Task",a.addEventListener("click",(()=>{o.generateForm(e)}));const n=document.createElement("div");n.id="task-list",t.appendChild(a),t.appendChild(n),i.loadTaskForProject(e,n)}}const r=d;document.addEventListener("DOMContentLoaded",class{static activateInterface(){r.addProjectUi(),document.querySelector("#all-tasks-tab").addEventListener("click",(()=>{c.loadAllTask()})),c.loadAllTask(),r.generateProjects()}}.activateInterface())})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L0QsWUFBWWdFLEVBQWdCLEdBRWhELENBRUEsb0JBQU9HLENBQWMxRCxHQUNqQixNQUFNeUMsRUFBUTdELEVBQVM4RCxRQUFRMUMsR0FDL0JwQixFQUFTK0QsT0FBT0YsRUFBTyxHQUV2QjVELEVBQU04QyxTQUFTUixJQUNYLEdBQUdBLEVBQUtuQixTQUFXQSxFQUFRLENBQ3ZCLE1BQU0yRCxFQUFZOUUsRUFBTTZELFFBQVF2QixHQUNoQ3RDLEVBQU04RCxPQUFPZ0IsRUFBVyxFQUM1QixLQUVKbEYsYUFBYTRDLFFBQVEsUUFBUzlDLEtBQUsrQyxVQUFVekMsSUFDN0NKLGFBQWE0QyxRQUFRLFdBQVk5QyxLQUFLK0MsVUFBVTFDLElBQ2hEZ0UsRUFBUVMsa0JBQ1osQ0FFQSxzQkFBT3JDLENBQWdCaEIsR0FDTGpCLFNBQVNDLGNBQWMsY0FDL0JDLFlBQWNlLEVBQ3BCLE1BQU1kLEVBQVVILFNBQVNDLGNBQWMsWUFDdkNFLEVBQVFDLFVBQVksR0FFcEIsTUFBTXlFLEVBQWE3RSxTQUFTTSxjQUFjLFVBQzFDdUUsRUFBV3RFLEdBQUssa0JBQ2hCc0UsRUFBVzNFLFlBQWMsYUFDekIyRSxFQUFXOUMsaUJBQWlCLFNBQVMsS0FDakNYLEVBQVlDLGFBQWFKLEVBQU8sSUFHcEMsTUFBTVosRUFBV0wsU0FBU00sY0FBYyxPQUN4Q0QsRUFBU0UsR0FBSyxZQUVkSixFQUFRSyxZQUFZcUUsR0FDcEIxRSxFQUFRSyxZQUFZSCxHQUVwQkksRUFBU2tDLG1CQUFtQjFCLEVBQVNaLEVBQ3pDLEVBSUosVUNySEFMLFNBQVMrQixpQkFBaUIsbUJDQzFCLE1BQ0ksd0JBQU8rQyxHQUNILEVBQVFoQixlQUVROUQsU0FBU0MsY0FBYyxrQkFDL0I4QixpQkFBaUIsU0FBUyxLQUM5QixFQUFRaEMsYUFBWSxJQUd4QixFQUFRQSxjQUNSLEVBQVF1RSxrQkFDWixHRFp3RFEsb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL21vZHVsZXMvU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL21vZHVsZXMvQWxsVGFzay5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL21vZHVsZXMvVGFzay5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL21vZHVsZXMvUHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb29wLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC1vb3AvLi9zcmMvbW9kdWxlcy9VSS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzdG9yZWRQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2plY3RzJykpO1xuY29uc3Qgc3RvcmVkVGFza3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0YXNrcycpKTtcblxuY29uc3QgcHJvamVjdHMgPSAgc3RvcmVkUHJvamVjdHMgfHwgW11cbmNvbnN0IHRhc2tzID0gc3RvcmVkVGFza3MgfHwgW11cblxuXG5leHBvcnQge3Byb2plY3RzLCB0YXNrcywgc3RvcmVkUHJvamVjdHMsIHN0b3JlZFRhc2tzfSIsImltcG9ydCB7IExvYWRUYXNrIH0gZnJvbSBcIi4vVGFza1wiXG5cbmNsYXNzIEFsbFRhc2sge1xuICAgIHN0YXRpYyBsb2FkQWxsVGFzaygpIHtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFiLXRpdGxlJylcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSAnQWxsIFRhc2tzJztcbiAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50JylcbiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnJ1xuICAgICAgICBjb25zdCB0YXNrTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHRhc2tMaXN0LmlkID0gJ3Rhc2stbGlzdCdcblxuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKHRhc2tMaXN0KVxuXG4gICAgICAgIExvYWRUYXNrLmxvYWRBbGxUYXNrcyh0YXNrTGlzdClcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFsbFRhc2siLCJpbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9Qcm9qZWN0XCJcbmltcG9ydCB7IHRhc2tzLCBzdG9yZWRQcm9qZWN0cywgc3RvcmVkVGFza3MsIHByb2plY3RzIH0gZnJvbSBcIi4vU3RvcmFnZVwiXG5pbXBvcnQgQWxsVGFzayBmcm9tIFwiLi9BbGxUYXNrXCJcblxuY2xhc3MgVGFzayB7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgcHJvamVjdCwgY2hlY2tlZCkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGVcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uXG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGVcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3RcbiAgICAgICAgdGhpcy5jaGVja2VkID0gY2hlY2tlZFxuICAgIH1cbn1cblxuY2xhc3MgTWFrZU5ld1Rhc2sge1xuICAgIHN0YXRpYyBnZW5lcmF0ZUZvcm0ocHJvamVjdCkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRlbnQnKVxuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBpZD1cImFkZC10YXNrcy1pbnB1dHMtY29udGFpbmVyXCIgc3R5bGU9XCJkaXNwbGF5OiBmbGV4O1wiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInRhc2stdGl0bGVcIj5UaXRsZTogPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwidGFzay10aXRsZVwiIG1heGxlbmd0aD1cIjQwXCI+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFzay1kZXNjcmlwdGlvblwiPkRlc2NyaXB0aW9uOiA8L2xhYmVsPlxuICAgICAgICAgICAgPHRleHRhcmVhIGlkPVwidGFzay1kZXNjcmlwdGlvblwiIG1heGxlbmd0aD1cIjIwMFwiPjwvdGV4dGFyZWE+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFzay1kYXRlXCI+RGF0ZTogPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIGlkPVwidGFzay1kYXRlXCIgbWF4PVwiOTk5OS0xMi0zMVwiPlxuICAgICAgICAgICAgPGRpdiBpZD1cInByaW9yaXR5LXRpdGxlXCI+UHJpb3JpdHk6IDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBpZD1cInByaW9yaXR5LWJ1dHRvbi1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwibG93LXByaW9yaXR5LWJ0blwiPkxvdzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJtZWQtcHJpb3JpdHktYnRuXCI+TWVkPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImhpZ2gtcHJpb3JpdHktYnRuXCI+SGlnaDwvYnV0dG9uPlxuICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBpZD1cImFkZC1jYW5jZWwtdGFzay1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJhZGQtdGFzay1jb25maXJtLWJ1dHRvblwiPkFkZDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImNhbmNlbC10YXNrLWNvbmZpcm0tYnV0dG9uXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICAgICAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2stdGl0bGUnKTtcbiAgICAgICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2stZGVzY3JpcHRpb24nKTtcbiAgICAgICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay1kYXRlJylcbiAgICAgICAgY29uc3QgbG93UHJpb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb3ctcHJpb3JpdHktYnRuJyk7XG4gICAgICAgIGNvbnN0IG1lZFByaW9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVkLXByaW9yaXR5LWJ0bicpO1xuICAgICAgICBjb25zdCBoaWdoUHJpb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoaWdoLXByaW9yaXR5LWJ0bicpO1xuXG4gICAgICAgIGNvbnN0IGFkZFRhc2tidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLXRhc2stY29uZmlybS1idXR0b24nKTtcbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhbmNlbC10YXNrLWNvbmZpcm0tYnV0dG9uJyk7XG5cbiAgICAgICAgbGV0IHNlbGVjdGVkUHJpbyA9ICcnXG5cbiAgICAgICAgbG93UHJpb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBsb3dQcmlvQnRuLmNsYXNzTmFtZSA9ICdzZWxlY3RlZFByaW8nXG4gICAgICAgICAgICBtZWRQcmlvQnRuLmNsYXNzTmFtZSA9ICcnXG4gICAgICAgICAgICBoaWdoUHJpb0J0bi5jbGFzc05hbWUgPSAnJ1xuXG4gICAgICAgICAgICBzZWxlY3RlZFByaW8gPSAnTG93J1xuICAgICAgICB9KVxuICAgICAgICBtZWRQcmlvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGxvd1ByaW9CdG4uY2xhc3NOYW1lID0gJydcbiAgICAgICAgICAgIG1lZFByaW9CdG4uY2xhc3NOYW1lID0gJ3NlbGVjdGVkUHJpbydcbiAgICAgICAgICAgIGhpZ2hQcmlvQnRuLmNsYXNzTmFtZSA9ICcnXG5cbiAgICAgICAgICAgIHNlbGVjdGVkUHJpbyA9ICdNZWQnXG4gICAgICAgIH0pXG4gICAgICAgIGhpZ2hQcmlvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGxvd1ByaW9CdG4uY2xhc3NOYW1lID0gJydcbiAgICAgICAgICAgIG1lZFByaW9CdG4uY2xhc3NOYW1lID0gJydcbiAgICAgICAgICAgIGhpZ2hQcmlvQnRuLmNsYXNzTmFtZSA9ICdzZWxlY3RlZFByaW8nXG5cbiAgICAgICAgICAgIHNlbGVjdGVkUHJpbyA9ICdIaWdoJ1xuICAgICAgICB9KVxuXG4gICAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBQcm9qZWN0LnZpZXdQcm9qZWN0UGFnZShwcm9qZWN0KVxuICAgICAgICB9KVxuXG4gICAgICAgIGFkZFRhc2tidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgaWYgKHRhc2tUaXRsZS52YWx1ZS50cmltKCkgIT0gJycgJiYgdGFza0Rlc2NyaXB0aW9uLnZhbHVlLnRyaW0oKSAhPSAnJyAmJiB0YXNrRGF0ZS52YWx1ZSAhPSAnJyAmJiBzZWxlY3RlZFByaW8gIT0gJycpe1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2sgPSBuZXcgVGFzayh0YXNrVGl0bGUudmFsdWUsIHRhc2tEZXNjcmlwdGlvbi52YWx1ZSwgdGFza0RhdGUudmFsdWUsIHNlbGVjdGVkUHJpbywgcHJvamVjdCwgZmFsc2UpXG4gICAgICAgICAgICAgICAgdGFza3MucHVzaCh0YXNrKVxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRhc2tzKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFza3MpXG4gICAgICAgICAgICAgICAgUHJvamVjdC52aWV3UHJvamVjdFBhZ2UocHJvamVjdClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFza1RpdGxlLnZhbHVlLnRyaW0oKSwgdGFza0Rlc2NyaXB0aW9uLnZhbHVlLnRyaW0oKSwgdGFza0RhdGUudmFsdWUsIHNlbGVjdGVkUHJpbylcbiAgICAgICAgICAgICAgICBhbGVydCgnUGxlYXNlIGZpbGwgYWxsIGluZm9ybWF0aW9uJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBcbiAgICAgIFxuICAgIH1cbn1cblxuY2xhc3MgTG9hZFRhc2sge1xuICAgIHN0YXRpYyBsb2FkVGFza0ZvclByb2plY3QocHJvamVjdCwgdGFza0xpc3QpIHtcbiAgICAgICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4gIHtcbiAgICAgICAgICAgIGlmICh0YXNrLnByb2plY3QgPT0gcHJvamVjdCl7XG4gICAgICAgICAgICAgICAgTG9hZFRhc2subG9hZFRhc2tHZW5lcmFsKHRhc2ssIHRhc2tMaXN0LCBmYWxzZSlcblxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHN0YXRpYyBsb2FkQWxsVGFza3ModGFza0xpc3QpIHtcbiAgICAgICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4gIHtcbiAgICAgICAgICAgICAgICBMb2FkVGFzay5sb2FkVGFza0dlbmVyYWwodGFzaywgdGFza0xpc3QsIHRydWUpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc3RhdGljIGxvYWRUYXNrR2VuZXJhbCh0YXNrLCB0YXNrTGlzdCwgdG9kYXkpIHtcbiAgICAgICAgY29uc3QgdGFza0NhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgIHRhc2tDYXJkLmNsYXNzTmFtZSA9ICd0YXNrLWNhcmQnXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgIGNoZWNrQm94LmNsYXNzTmFtZSA9ICdjYXJkLWNoZWNrLWJveCdcbiAgICAgICAgICAgICAgICBjaGVja0JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrLmNoZWNrZWQgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suY2hlY2tlZCA9IHRydWUgXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0JveC5jbGFzc0xpc3QudG9nZ2xlKCdjaGVja2VkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDYXJkLmNsYXNzTGlzdC50b2dnbGUoJ2NoZWNrZWQnKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQm94LmNsYXNzTGlzdC50b2dnbGUoJ2NoZWNrZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NhcmQuY2xhc3NMaXN0LnRvZ2dsZSgnY2hlY2tlZCcpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgaWYgKHRhc2suY2hlY2tlZCA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrQm94LmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKVxuICAgICAgICAgICAgICAgICAgICB0YXNrQ2FyZC5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJylcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICAgICAgdGl0bGUuY2xhc3NOYW1lID0gJ2NhcmQtdGl0bGUnXG4gICAgICAgICAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLnRpdGxlO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZGV0YWlscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgICAgICAgICAgICAgZGV0YWlscy5jbGFzc05hbWUgPSAnY2FyZC1kZXRhaWxzLWJ1dHRvbidcbiAgICAgICAgICAgICAgICBkZXRhaWxzLnRleHRDb250ZW50ID0gJ2RldGFpbHMnXG4gICAgICAgICAgICAgICAgZGV0YWlscy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICBFZGl0VGFzay5lZGl0VGFzayh0YXNrLnByb2plY3QsIHRhc2ssIHRvZGF5KVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgICAgICBkYXRlLmNsYXNzTmFtZSA9ICdjYXJkLWRhdGUnXG4gICAgICAgICAgICAgICAgZGF0ZS50ZXh0Q29udGVudCA9IHRhc2suZHVlRGF0ZVxuXG4gICAgICAgICAgICAgICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgIHByaW9yaXR5LmNsYXNzTmFtZSA9ICdjYXJkLXByaW8nXG4gICAgICAgICAgICAgICAgcHJpb3JpdHkudGV4dENvbnRlbnQgPSB0YXNrLnByaW9yaXR5XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVDYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgICAgICBkZWxldGVDYXJkLmNsYXNzTmFtZSA9ICdjYXJkLWRlbGV0ZSdcbiAgICAgICAgICAgICAgICBkZWxldGVDYXJkLnRleHRDb250ZW50ID0gJ1gnXG4gICAgICAgICAgICAgICAgZGVsZXRlQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFByb2plY3QgPSB0YXNrLnByb2plY3RcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0YXNrcy5pbmRleE9mKHRhc2spXG4gICAgICAgICAgICAgICAgICAgIHRhc2tzLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvZGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxUYXNrLmxvYWRBbGxUYXNrKClcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFByb2plY3Qudmlld1Byb2plY3RQYWdlKGN1cnJlbnRQcm9qZWN0KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIHRhc2tDYXJkLmFwcGVuZENoaWxkKGNoZWNrQm94KVxuICAgICAgICAgICAgICAgIHRhc2tDYXJkLmFwcGVuZENoaWxkKHRpdGxlKVxuICAgICAgICAgICAgICAgIHRhc2tDYXJkLmFwcGVuZENoaWxkKGRldGFpbHMpXG4gICAgICAgICAgICAgICAgdGFza0NhcmQuYXBwZW5kQ2hpbGQoZGF0ZSlcbiAgICAgICAgICAgICAgICB0YXNrQ2FyZC5hcHBlbmRDaGlsZChwcmlvcml0eSlcbiAgICAgICAgICAgICAgICB0YXNrQ2FyZC5hcHBlbmRDaGlsZChkZWxldGVDYXJkKVxuXG5cblxuICAgICAgICAgICAgICAgIHRhc2tMaXN0LmFwcGVuZENoaWxkKHRhc2tDYXJkKVxuICAgIH1cbn1cblxuY2xhc3MgRWRpdFRhc2sge1xuXG4gICAgc3RhdGljIGVkaXRUYXNrKHByb2plY3QsIHRhc2ssIHRvZGF5KSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGVudCcpXG4gICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGlkPVwiYWRkLXRhc2tzLWlucHV0cy1jb250YWluZXJcIiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7XCI+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFzay10aXRsZVwiPlRpdGxlOiA8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJ0YXNrLXRpdGxlXCIgdmFsdWU9JHt0YXNrLnRpdGxlfSBtYXhsZW5ndGg9XCI0MFwiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInRhc2stZGVzY3JpcHRpb25cIj5EZXNjcmlwdGlvbjogPC9sYWJlbD5cbiAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cInRhc2stZGVzY3JpcHRpb25cIiBtYXhsZW5ndGg9XCIyMDBcIj4ke3Rhc2suZGVzY3JpcHRpb259PC90ZXh0YXJlYT5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ0YXNrLWRhdGVcIj5EYXRlOiA8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgaWQ9XCJ0YXNrLWRhdGVcIiB2YWx1ZT0ke3Rhc2suZHVlRGF0ZX0gbWF4PVwiOTk5OS0xMi0zMVwiPlxuICAgICAgICAgICAgPGRpdiBpZD1cInByaW9yaXR5LXRpdGxlXCI+UHJpb3JpdHk6IDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBpZD1cInByaW9yaXR5LWJ1dHRvbi1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwibG93LXByaW9yaXR5LWJ0blwiPkxvdzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJtZWQtcHJpb3JpdHktYnRuXCI+TWVkPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImhpZ2gtcHJpb3JpdHktYnRuXCI+SGlnaDwvYnV0dG9uPlxuICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBpZD1cImFkZC1jYW5jZWwtdGFzay1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJhZGQtdGFzay1jb25maXJtLWJ1dHRvblwiPkFkZDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImNhbmNlbC10YXNrLWNvbmZpcm0tYnV0dG9uXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICAgICAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2stdGl0bGUnKTtcbiAgICAgICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2stZGVzY3JpcHRpb24nKTtcbiAgICAgICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay1kYXRlJylcbiAgICAgICAgY29uc3QgbG93UHJpb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb3ctcHJpb3JpdHktYnRuJyk7XG4gICAgICAgIGNvbnN0IG1lZFByaW9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVkLXByaW9yaXR5LWJ0bicpO1xuICAgICAgICBjb25zdCBoaWdoUHJpb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoaWdoLXByaW9yaXR5LWJ0bicpO1xuXG4gICAgICAgIGNvbnN0IGFkZFRhc2tidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLXRhc2stY29uZmlybS1idXR0b24nKTtcbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhbmNlbC10YXNrLWNvbmZpcm0tYnV0dG9uJyk7XG4gICAgICAgIFxuICAgICAgICBsZXQgc2VsZWN0ZWRQcmlvID0gdGFzay5wcmlvcml0eVxuICAgICAgICBpZihzZWxlY3RlZFByaW8gPT0gJ0xvdycpIHtcbiAgICAgICAgICAgIGxvd1ByaW9CdG4uY2xhc3NOYW1lID0gJ3NlbGVjdGVkUHJpbydcbiAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZFByaW8gPT0gJ01lZCcpIHtcbiAgICAgICAgICAgIG1lZFByaW9CdG4uY2xhc3NOYW1lID0gJ3NlbGVjdGVkUHJpbydcbiAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZFByaW8gPT0gJ0hpZ2gnKSB7XG4gICAgICAgICAgICBoaWdoUHJpb0J0bi5jbGFzc05hbWUgPSAnc2VsZWN0ZWRQcmlvJ1xuICAgICAgICB9XG5cbiAgICAgICAgbG93UHJpb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBsb3dQcmlvQnRuLmNsYXNzTmFtZSA9ICdzZWxlY3RlZFByaW8nXG4gICAgICAgICAgICBtZWRQcmlvQnRuLmNsYXNzTmFtZSA9ICcnXG4gICAgICAgICAgICBoaWdoUHJpb0J0bi5jbGFzc05hbWUgPSAnJ1xuXG4gICAgICAgICAgICBzZWxlY3RlZFByaW8gPSAnTG93J1xuICAgICAgICB9KVxuICAgICAgICBtZWRQcmlvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGxvd1ByaW9CdG4uY2xhc3NOYW1lID0gJydcbiAgICAgICAgICAgIG1lZFByaW9CdG4uY2xhc3NOYW1lID0gJ3NlbGVjdGVkUHJpbydcbiAgICAgICAgICAgIGhpZ2hQcmlvQnRuLmNsYXNzTmFtZSA9ICcnXG5cbiAgICAgICAgICAgIHNlbGVjdGVkUHJpbyA9ICdNZWQnXG4gICAgICAgIH0pXG4gICAgICAgIGhpZ2hQcmlvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGxvd1ByaW9CdG4uY2xhc3NOYW1lID0gJydcbiAgICAgICAgICAgIG1lZFByaW9CdG4uY2xhc3NOYW1lID0gJydcbiAgICAgICAgICAgIGhpZ2hQcmlvQnRuLmNsYXNzTmFtZSA9ICdzZWxlY3RlZFByaW8nXG5cbiAgICAgICAgICAgIHNlbGVjdGVkUHJpbyA9ICdIaWdoJ1xuICAgICAgICB9KVxuXG4gICAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBpZiAodG9kYXkpe1xuICAgICAgICAgICAgICAgIEFsbFRhc2subG9hZEFsbFRhc2soKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBQcm9qZWN0LnZpZXdQcm9qZWN0UGFnZShwcm9qZWN0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGFkZFRhc2tidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgaWYgKHRhc2tUaXRsZS52YWx1ZS50cmltKCkgIT0gJycgJiYgdGFza0Rlc2NyaXB0aW9uLnZhbHVlLnRyaW0oKSAhPSAnJyAmJiB0YXNrRGF0ZS52YWx1ZSAhPSAnJyAmJiBzZWxlY3RlZFByaW8gIT0gJycpe1xuICAgICAgICAgICAgICAgIHRhc2sudGl0bGUgPSB0YXNrVGl0bGUudmFsdWU7XG4gICAgICAgICAgICAgICAgdGFzay5kZXNjcmlwdGlvbiA9IHRhc2tEZXNjcmlwdGlvbi52YWx1ZTtcbiAgICAgICAgICAgICAgICB0YXNrLmR1ZURhdGUgPSB0YXNrRGF0ZS52YWx1ZTtcbiAgICAgICAgICAgICAgICB0YXNrLnByaW9yaXR5ID0gc2VsZWN0ZWRQcmlvO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhc2tzKVxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRhc2tzKSk7XG4gICAgICAgICAgICAgICAgaWYgKHRvZGF5KXtcbiAgICAgICAgICAgICAgICAgICAgQWxsVGFzay5sb2FkQWxsVGFzaygpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgUHJvamVjdC52aWV3UHJvamVjdFBhZ2UocHJvamVjdClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhc2tUaXRsZS52YWx1ZS50cmltKCksIHRhc2tEZXNjcmlwdGlvbi52YWx1ZS50cmltKCksIHRhc2tEYXRlLnZhbHVlLCBzZWxlY3RlZFByaW8pXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1BsZWFzZSBmaWxsIGFsbCBpbmZvcm1hdGlvbicpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cblxuICAgIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBUYXNrXG5leHBvcnQge01ha2VOZXdUYXNrLCBMb2FkVGFza30iLCJpbXBvcnQgVXNlckludGVyZmFjZSBmcm9tIFwiLi9VSVwiO1xuaW1wb3J0IHsgcHJvamVjdHMsIHN0b3JlZFByb2plY3RzLCBzdG9yZWRUYXNrcywgdGFza3MgfSBmcm9tIFwiLi9TdG9yYWdlXCI7XG5pbXBvcnQgeyBNYWtlTmV3VGFzaywgTG9hZFRhc2sgfSBmcm9tIFwiLi9UYXNrXCI7XG5pbXBvcnQgQWxsVGFzayBmcm9tIFwiLi9BbGxUYXNrXCI7XG5cbmNsYXNzIFByb2plY3Qge1xuICAgIHN0YXRpYyBhZGRQcm9qZWN0VWkoKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtcHJvamVjdC1pbnB1dC1jb250YWluZXInKTtcbiAgICAgICAgY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtcHJvamVjdHMtYnV0dG9uJylcbiAgICAgICAgUHJvamVjdC5hZGRQcm9qZWN0QnRuKGFkZFByb2plY3RCdG4sIHByb2plY3RJbnB1dClcbiAgICAgICAgUHJvamVjdC5jb25maXJtQnRuKGFkZFByb2plY3RCdG4sIHByb2plY3RJbnB1dClcbiAgICAgICAgUHJvamVjdC5jYW5jZWxCdG4oYWRkUHJvamVjdEJ0biwgcHJvamVjdElucHV0KVxuICAgIH1cbiAgICBzdGF0aWMgYWRkUHJvamVjdEJ0bihhZGRQcm9qZWN0QnRuLCBwcm9qZWN0SW5wdXQpIHtcbiAgICAgICAgYWRkUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4ge1xuICAgICAgICAgICAgYWRkUHJvamVjdEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICBwcm9qZWN0SW5wdXQuc3R5bGUuZGlzcGxheSA9ICdncmlkJ1xuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdHMpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc3RhdGljIGNvbmZpcm1CdG4oYWRkUHJvamVjdEJ0biwgcHJvamVjdElucHV0KSB7XG4gICAgICAgIGNvbnN0IGFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtYnV0dG9uJylcbiAgICAgICAgYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtcHJvamVjdC1pbnB1dCcpXG4gICAgICAgICAgICBpZiAocHJvamVjdHMuaW5jbHVkZXMoaW5wdXQudmFsdWUpKXtcbiAgICAgICAgICAgICAgICBhbGVydChgJHtpbnB1dC52YWx1ZX0gYWxyZWFkeSBleGlzdGApXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnZhbHVlLnRyaW0oKSA9PSAnJyl7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ2VudGVyIGEgdmFsdWUgcGxlYXNlJylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdHMucHVzaChpbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKTtcbiAgICAgICAgICAgICAgICBQcm9qZWN0LmdlbmVyYXRlUHJvamVjdHMoKVxuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0nJ1xuICAgICAgICAgICAgICAgIHByb2plY3RJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICAgICAgYWRkUHJvamVjdEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc3RhdGljIGNhbmNlbEJ0bihhZGRQcm9qZWN0QnRuLCBwcm9qZWN0SW5wdXQpIHtcbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhbmNlbC1idXR0b24nKVxuICAgICAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLXByb2plY3QtaW5wdXQnKVxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPScnXG4gICAgICAgICAgICBwcm9qZWN0SW5wdXQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgICAgYWRkUHJvamVjdEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHN0YXRpYyBnZW5lcmF0ZVByb2plY3RzKCkge1xuICAgICAgICBjb25zdCBwcm9qZWN0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0LWxpc3QnKVxuICAgICAgICBwcm9qZWN0TGlzdC5pbm5lckhUTUwgPSAnJ1xuICAgICAgICBwcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KT0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgcHJvamVjdENvbnRhaW5lci5jbGFzc05hbWUgPSAncHJvamVjdC1jb250YWluZXInXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0U2luZ2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAgICAgICAgIHByb2plY3RTaW5nbGUuY2xhc3NOYW1lID0gJ3Byb2plY3QnXG4gICAgICAgICAgICBwcm9qZWN0U2luZ2xlLnRleHRDb250ZW50ID0gcHJvamVjdFxuICAgICAgICAgICAgY29uc3QgZGVsZXRlUHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgICAgICAgICBkZWxldGVQcm9qZWN0QnRuLmNsYXNzTmFtZSA9ICdkZWxldGUtcHJvamVjdC1idXR0b24nXG4gICAgICAgICAgICBkZWxldGVQcm9qZWN0QnRuLnRleHRDb250ZW50ID0gJ1gnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlbGV0ZVByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgICAgIFByb2plY3QuZGVsZXRlUHJvamVjdChwcm9qZWN0KVxuICAgICAgICAgICAgICAgIEFsbFRhc2subG9hZEFsbFRhc2soKVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgcHJvamVjdFNpbmdsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICAgICAgUHJvamVjdC52aWV3UHJvamVjdFBhZ2UocHJvamVjdClcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdFNpbmdsZSlcbiAgICAgICAgICAgIHByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQoZGVsZXRlUHJvamVjdEJ0bilcblxuICAgICAgICAgICAgcHJvamVjdExpc3QuYXBwZW5kQ2hpbGQocHJvamVjdENvbnRhaW5lcilcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVsZXRlUHJvamVjdChwcm9qZWN0KSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcHJvamVjdHMuaW5kZXhPZihwcm9qZWN0KVxuICAgICAgICBwcm9qZWN0cy5zcGxpY2UoaW5kZXgsIDEpXG5cbiAgICAgICAgdGFza3MuZm9yRWFjaCgodGFzayk9PiB7XG4gICAgICAgICAgICBpZih0YXNrLnByb2plY3QgPT0gcHJvamVjdCl7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza0luZGV4ID0gdGFza3MuaW5kZXhPZih0YXNrKVxuICAgICAgICAgICAgICAgIHRhc2tzLnNwbGljZSh0YXNrSW5kZXgsIDEpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRhc2tzKSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKVxuICAgICAgICBQcm9qZWN0LmdlbmVyYXRlUHJvamVjdHMoKVxuICAgIH1cblxuICAgIHN0YXRpYyB2aWV3UHJvamVjdFBhZ2UocHJvamVjdCkge1xuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YWItdGl0bGUnKVxuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHByb2plY3Q7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGVudCcpXG4gICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gJydcblxuICAgICAgICBjb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAgICAgYWRkVGFza0J0bi5pZCA9ICdhZGQtdGFzay1idXR0b24nXG4gICAgICAgIGFkZFRhc2tCdG4udGV4dENvbnRlbnQgPSAnKyBBZGQgVGFzaydcbiAgICAgICAgYWRkVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBNYWtlTmV3VGFzay5nZW5lcmF0ZUZvcm0ocHJvamVjdClcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCB0YXNrTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHRhc2tMaXN0LmlkID0gJ3Rhc2stbGlzdCdcblxuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGFkZFRhc2tCdG4pXG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQodGFza0xpc3QpXG5cbiAgICAgICAgTG9hZFRhc2subG9hZFRhc2tGb3JQcm9qZWN0KHByb2plY3QsIHRhc2tMaXN0KVxuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBQcm9qZWN0IiwiaW1wb3J0IFVzZXJJbnRlcmZhY2UgZnJvbSBcIi4vbW9kdWxlcy9VSVwiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgVXNlckludGVyZmFjZS5hY3RpdmF0ZUludGVyZmFjZSgpKSIsImltcG9ydCBQcm9qZWN0IGZyb20gXCIuL1Byb2plY3RcIlxuaW1wb3J0IEFsbFRhc2sgZnJvbSBcIi4vQWxsVGFza1wiXG5cbmNsYXNzIFVzZXJJbnRlcmZhY2Uge1xuICAgIHN0YXRpYyBhY3RpdmF0ZUludGVyZmFjZSgpIHtcbiAgICAgICAgUHJvamVjdC5hZGRQcm9qZWN0VWkoKVxuXG4gICAgICAgIGNvbnN0IGFsbFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWxsLXRhc2tzLXRhYicpXG4gICAgICAgIGFsbFRhc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgQWxsVGFzay5sb2FkQWxsVGFzaygpXG4gICAgICAgIH0pXG5cbiAgICAgICAgQWxsVGFzay5sb2FkQWxsVGFzaygpXG4gICAgICAgIFByb2plY3QuZ2VuZXJhdGVQcm9qZWN0cygpXG4gICAgfVxuICAgIFxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW50ZXJmYWNlIl0sIm5hbWVzIjpbInN0b3JlZFByb2plY3RzIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInN0b3JlZFRhc2tzIiwicHJvamVjdHMiLCJ0YXNrcyIsImxvYWRBbGxUYXNrIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJjb250ZW50IiwiaW5uZXJIVE1MIiwidGFza0xpc3QiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJhcHBlbmRDaGlsZCIsIkxvYWRUYXNrIiwibG9hZEFsbFRhc2tzIiwiVGFzayIsImNvbnN0cnVjdG9yIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsInByb2plY3QiLCJjaGVja2VkIiwidGhpcyIsIk1ha2VOZXdUYXNrIiwiZ2VuZXJhdGVGb3JtIiwidGFza1RpdGxlIiwidGFza0Rlc2NyaXB0aW9uIiwidGFza0RhdGUiLCJsb3dQcmlvQnRuIiwibWVkUHJpb0J0biIsImhpZ2hQcmlvQnRuIiwiYWRkVGFza2J0biIsImNhbmNlbEJ0biIsInNlbGVjdGVkUHJpbyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc05hbWUiLCJ2aWV3UHJvamVjdFBhZ2UiLCJ2YWx1ZSIsInRyaW0iLCJ0YXNrIiwicHVzaCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjb25zb2xlIiwibG9nIiwiYWxlcnQiLCJsb2FkVGFza0ZvclByb2plY3QiLCJmb3JFYWNoIiwibG9hZFRhc2tHZW5lcmFsIiwidG9kYXkiLCJ0YXNrQ2FyZCIsImNoZWNrQm94IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiYWRkIiwiZGV0YWlscyIsIkVkaXRUYXNrIiwiZWRpdFRhc2siLCJkYXRlIiwiZGVsZXRlQ2FyZCIsImN1cnJlbnRQcm9qZWN0IiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiUHJvamVjdCIsImFkZFByb2plY3RVaSIsInByb2plY3RJbnB1dCIsImFkZFByb2plY3RCdG4iLCJjb25maXJtQnRuIiwic3R5bGUiLCJkaXNwbGF5IiwiaW5wdXQiLCJpbmNsdWRlcyIsImdlbmVyYXRlUHJvamVjdHMiLCJwcm9qZWN0TGlzdCIsInByb2plY3RDb250YWluZXIiLCJwcm9qZWN0U2luZ2xlIiwiZGVsZXRlUHJvamVjdEJ0biIsImRlbGV0ZVByb2plY3QiLCJ0YXNrSW5kZXgiLCJhZGRUYXNrQnRuIiwiYWN0aXZhdGVJbnRlcmZhY2UiXSwic291cmNlUm9vdCI6IiJ9